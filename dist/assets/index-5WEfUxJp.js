var Iu=Object.defineProperty;var Ss=e=>{throw TypeError(e)};var Eu=(e,t,n)=>t in e?Iu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var un=(e,t,n)=>Eu(e,typeof t!="symbol"?t+"":t,n),Mu=(e,t,n)=>t.has(e)||Ss("Cannot "+n);var Vn=(e,t,n)=>(Mu(e,t,"read from private field"),n?n.call(e):t.get(e)),As=(e,t,n)=>t.has(e)?Ss("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var ju={};function Ro(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:ju}var Ci=Object.assign,tr=Object.getOwnPropertyDescriptor,Me=Object.defineProperty,On=Object.prototype,ao=[];Object.freeze(ao);var No={};Object.freeze(No);var Du=typeof Proxy<"u",xu=Object.toString();function Pi(){Du||A("Proxy not available")}function ki(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var xt=function(){};function ce(e){return typeof e=="function"}function dt(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function wr(e){return e!==null&&typeof e=="object"}function Ue(e){if(!wr(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n.toString()===xu}function Ii(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function Sn(e,t,n){Me(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Ei(e,t,n){Me(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function st(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(r){return wr(r)&&r[n]===!0}}function qt(e){return e instanceof Map}function An(e){return e instanceof Set}var Mi=typeof Object.getOwnPropertySymbols<"u";function Ru(e){var t=Object.keys(e);if(!Mi)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter(function(r){return On.propertyIsEnumerable.call(e,r)})):t}var Lt=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Mi?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function ji(e){return e===null?null:typeof e=="object"?""+e:e}function Fe(e,t){return On.hasOwnProperty.call(e,t)}var Nu=Object.getOwnPropertyDescriptors||function(t){var n={};return Lt(t).forEach(function(r){n[r]=tr(t,r)}),n};function $u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fu(r.key),r)}}function Or(e,t,n){return t&&$u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nt(){return nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nt.apply(this,arguments)}function Di(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,uo(e,t)}function uo(e,t){return uo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},uo(e,t)}function Hr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vu(e,t){if(e){if(typeof e=="string")return Ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ts(e,t)}}function Ts(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rt(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=Vu(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lu(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Fu(e){var t=Lu(e,"string");return typeof t=="symbol"?t:String(t)}var Ee=Symbol("mobx-stored-annotations");function we(e){function t(n,r){if(Tn(r))return e.decorate_20223_(n,r);Jt(n,r,e)}return Object.assign(t,e)}function Jt(e,t,n){Fe(e,Ee)||Sn(e,Ee,nt({},e[Ee])),Ju(n)||(e[Ee][t]=n)}function Bu(e){return Fe(e,Ee)||Sn(e,Ee,nt({},e[Ee])),e[Ee]}function Tn(e){return typeof e=="object"&&typeof e.kind=="string"}var b=Symbol("mobx administration"),Cn=function(){function e(n){n===void 0&&(n="Atom"),this.name_=void 0,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=M.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},t.reportObserved=function(){return Zi(this)},t.reportChanged=function(){se(),ea(this),ie()},t.toString=function(){return this.name_},e}(),$o=st("Atom",Cn);function Xe(e,t,n){t===void 0&&(t=xt),n===void 0&&(n=xt);var r=new Cn(e);return t!==xt&&ua(r,t),n!==xt&&Go(r,n),r}function Uu(e,t){return e===t}function Gu(e,t){return Yo(e,t)}function Wu(e,t){return Yo(e,t,1)}function Ku(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ht={identity:Uu,structural:Gu,default:Ku,shallow:Wu};function pt(e,t,n){return Ge(e)?e:Array.isArray(e)?E.array(e,{name:n}):Ue(e)?E.object(e,void 0,{name:n}):qt(e)?E.map(e,{name:n}):An(e)?E.set(e,{name:n}):typeof e=="function"&&!Xt(e)&&!Ut(e)?Ii(e)?mt(e):Ft(n,e):e}function zu(e,t,n){if(e==null||L(e)||Q(e)||K(e)||ee(e))return e;if(Array.isArray(e))return E.array(e,{name:n,deep:!1});if(Ue(e))return E.object(e,void 0,{name:n,deep:!1});if(qt(e))return E.map(e,{name:n,deep:!1});if(An(e))return E.set(e,{name:n,deep:!1})}function Sr(e){return e}function Hu(e,t){return Yo(e,t)?t:e}var xi="override",qu=we({annotationType_:xi,make_:Xu,extend_:Yu,decorate_20223_:Qu});function Ju(e){return e.annotationType_===xi}function Xu(e,t){return 0}function Yu(e,t,n,r){A("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function Qu(e,t){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function Pn(e,t){return{annotationType_:e,options_:t,make_:Zu,extend_:el,decorate_20223_:tl}}function Zu(e,t,n,r){var o;if((o=this.options_)!=null&&o.bound)return this.extend_(e,t,n,!1)===null?0:1;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if(Xt(n.value))return 1;var s=Ri(e,this,t,n,!1);return Me(r,t,s),2}function el(e,t,n,r){var o=Ri(e,this,t,n);return e.defineProperty_(t,o,r)}function tl(e,t){var n=t.kind,r=t.name,o=t.addInitializer,s=this,i=function(l){var c,f,d,h;return rt((c=(f=s.options_)==null?void 0:f.name)!=null?c:r.toString(),l,(d=(h=s.options_)==null?void 0:h.autoAction)!=null?d:!1)};if(n=="field"){o(function(){Jt(this,r,s)});return}if(n=="method"){var a;return Xt(e)||(e=i(e)),(a=this.options_)!=null&&a.bound&&o(function(){var u=this,l=u[r].bind(u);l.isMobxAction=!0,u[r]=l}),e}A("Cannot apply '"+s.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function nl(e,t,n,r){t.annotationType_,r.value}function Ri(e,t,n,r,o){var s,i,a,u,l,c,f;o===void 0&&(o=v.safeDescriptors),nl(e,t,n,r);var d=r.value;if((s=t.options_)!=null&&s.bound){var h;d=d.bind((h=e.proxy_)!=null?h:e.target_)}return{value:rt((i=(a=t.options_)==null?void 0:a.name)!=null?i:n.toString(),d,(u=(l=t.options_)==null?void 0:l.autoAction)!=null?u:!1,(c=t.options_)!=null&&c.bound?(f=e.proxy_)!=null?f:e.target_:void 0),configurable:o?e.isPlainObject_:!0,enumerable:!1,writable:!o}}function Ni(e,t){return{annotationType_:e,options_:t,make_:rl,extend_:ol,decorate_20223_:sl}}function rl(e,t,n,r){var o;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if((o=this.options_)!=null&&o.bound&&(!Fe(e.target_,t)||!Ut(e.target_[t]))&&this.extend_(e,t,n,!1)===null)return 0;if(Ut(n.value))return 1;var s=$i(e,this,t,n,!1,!1);return Me(r,t,s),2}function ol(e,t,n,r){var o,s=$i(e,this,t,n,(o=this.options_)==null?void 0:o.bound);return e.defineProperty_(t,s,r)}function sl(e,t){var n,r=t.name,o=t.addInitializer;return Ut(e)||(e=mt(e)),(n=this.options_)!=null&&n.bound&&o(function(){var s=this,i=s[r].bind(s);i.isMobXFlow=!0,s[r]=i}),e}function il(e,t,n,r){t.annotationType_,r.value}function $i(e,t,n,r,o,s){s===void 0&&(s=v.safeDescriptors),il(e,t,n,r);var i=r.value;if(Ut(i)||(i=mt(i)),o){var a;i=i.bind((a=e.proxy_)!=null?a:e.target_),i.isMobXFlow=!0}return{value:i,configurable:s?e.isPlainObject_:!0,enumerable:!1,writable:!s}}function Vo(e,t){return{annotationType_:e,options_:t,make_:al,extend_:ul,decorate_20223_:ll}}function al(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function ul(e,t,n,r){return cl(e,this,t,n),e.defineComputedProperty_(t,nt({},this.options_,{get:n.get,set:n.set}),r)}function ll(e,t){var n=this,r=t.name,o=t.addInitializer;return o(function(){var s=It(this)[b],i=nt({},n.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+r.toString()),s.values_.set(r,new xe(i))}),function(){return this[b].getObservablePropValue_(r)}}function cl(e,t,n,r){t.annotationType_,r.get}function Ar(e,t){return{annotationType_:e,options_:t,make_:fl,extend_:dl,decorate_20223_:hl}}function fl(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function dl(e,t,n,r){var o,s;return pl(e,this),e.defineObservableProperty_(t,n.value,(o=(s=this.options_)==null?void 0:s.enhancer)!=null?o:pt,r)}function hl(e,t){var n=this,r=t.kind,o=t.name,s=new WeakSet;function i(a,u){var l,c,f=It(a)[b],d=new Ze(u,(l=(c=n.options_)==null?void 0:c.enhancer)!=null?l:pt,"ObservableObject."+o.toString(),!1);f.values_.set(o,d),s.add(a)}if(r=="accessor")return{get:function(){return s.has(this)||i(this,e.get.call(this)),this[b].getObservablePropValue_(o)},set:function(u){return s.has(this)||i(this,u),this[b].setObservablePropValue_(o,u)},init:function(u){return s.has(this)||i(this,u),u}}}function pl(e,t,n,r){t.annotationType_}var vl="true",ml=Vi();function Vi(e){return{annotationType_:vl,options_:e,make_:yl,extend_:_l,decorate_20223_:bl}}function yl(e,t,n,r){var o,s;if(n.get)return N.make_(e,t,n,r);if(n.set){var i=rt(t.toString(),n.set);return r===e.target_?e.defineProperty_(t,{configurable:v.safeDescriptors?e.isPlainObject_:!0,set:i})===null?0:2:(Me(r,t,{configurable:!0,set:i}),2)}if(r!==e.target_&&typeof n.value=="function"){var a;if(Ii(n.value)){var u,l=(u=this.options_)!=null&&u.autoBind?mt.bound:mt;return l.make_(e,t,n,r)}var c=(a=this.options_)!=null&&a.autoBind?Ft.bound:Ft;return c.make_(e,t,n,r)}var f=((o=this.options_)==null?void 0:o.deep)===!1?E.ref:E;if(typeof n.value=="function"&&(s=this.options_)!=null&&s.autoBind){var d;n.value=n.value.bind((d=e.proxy_)!=null?d:e.target_)}return f.make_(e,t,n,r)}function _l(e,t,n,r){var o,s;if(n.get)return N.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:v.safeDescriptors?e.isPlainObject_:!0,set:rt(t.toString(),n.set)},r);if(typeof n.value=="function"&&(o=this.options_)!=null&&o.autoBind){var i;n.value=n.value.bind((i=e.proxy_)!=null?i:e.target_)}var a=((s=this.options_)==null?void 0:s.deep)===!1?E.ref:E;return a.extend_(e,t,n,r)}function bl(e,t){A("'"+this.annotationType_+"' cannot be used as a decorator")}var gl="observable",wl="observable.ref",Ol="observable.shallow",Sl="observable.struct",Li={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Li);function Ln(e){return e||Li}var lo=Ar(gl),Al=Ar(wl,{enhancer:Sr}),Tl=Ar(Ol,{enhancer:zu}),Cl=Ar(Sl,{enhancer:Hu}),Fi=we(lo);function Fn(e){return e.deep===!0?pt:e.deep===!1?Sr:kl(e.defaultDecorator)}function Pl(e){var t;return e?(t=e.defaultDecorator)!=null?t:Vi(e):void 0}function kl(e){var t,n;return e&&(t=(n=e.options_)==null?void 0:n.enhancer)!=null?t:pt}function Bi(e,t,n){if(Tn(t))return lo.decorate_20223_(e,t);if(dt(t)){Jt(e,t,lo);return}return Ge(e)?e:Ue(e)?E.object(e,t,n):Array.isArray(e)?E.array(e,t):qt(e)?E.map(e,t):An(e)?E.set(e,t):typeof e=="object"&&e!==null?e:E.box(e,t)}Ci(Bi,Fi);var Il={box:function(t,n){var r=Ln(n);return new Ze(t,Fn(r),r.name,!0,r.equals)},array:function(t,n){var r=Ln(n);return(v.useProxies===!1||r.proxy===!1?Fc:Ec)(t,Fn(r),r.name)},map:function(t,n){var r=Ln(n);return new qo(t,Fn(r),r.name)},set:function(t,n){var r=Ln(n);return new Jo(t,Fn(r),r.name)},object:function(t,n,r){return it(function(){return Wo(v.useProxies===!1||(r==null?void 0:r.proxy)===!1?It({},r):Tc({},r),t,n)})},ref:we(Al),shallow:we(Tl),deep:Fi,struct:we(Cl)},E=Ci(Bi,Il),Ui="computed",El="computed.struct",co=Vo(Ui),Ml=Vo(El,{equals:ht.structural}),N=function(t,n){if(Tn(n))return co.decorate_20223_(t,n);if(dt(n))return Jt(t,n,co);if(Ue(t))return we(Vo(Ui,t));var r=Ue(n)?n:{};return r.get=t,r.name||(r.name=t.name||""),new xe(r)};Object.assign(N,co);N.struct=we(Ml);var Cs,Ps,nr=0,jl=1,Dl=(Cs=(Ps=tr(function(){},"name"))==null?void 0:Ps.configurable)!=null?Cs:!1,ks={value:"action",configurable:!0,writable:!1,enumerable:!1};function rt(e,t,n,r){n===void 0&&(n=!1);function o(){return Gi(e,n,t,r||this,arguments)}return o.isMobxAction=!0,o.toString=function(){return t.toString()},Dl&&(ks.value=e,Me(o,"name",ks)),o}function Gi(e,t,n,r,o){var s=Wi(e,t);try{return n.apply(r,o)}catch(i){throw s.error_=i,i}finally{Ki(s)}}function Wi(e,t,n,r){var o=!1,s=0,i=v.trackingDerivation,a=!t||!i;se();var u=v.allowStateChanges;a&&(Pt(),u=Tr(!0));var l=Pr(!0),c={runAsAction_:a,prevDerivation_:i,prevAllowStateChanges_:u,prevAllowStateReads_:l,notifySpy_:o,startTime_:s,actionId_:jl++,parentActionId_:nr};return nr=c.actionId_,c}function Ki(e){nr!==e.actionId_&&A(30),nr=e.parentActionId_,e.error_!==void 0&&(v.suppressReactionErrors=!0),Cr(e.prevAllowStateChanges_),Nt(e.prevAllowStateReads_),ie(),e.runAsAction_&&Be(e.prevDerivation_),v.suppressReactionErrors=!1}function Lo(e,t){var n=Tr(e);try{return t()}finally{Cr(n)}}function Tr(e){var t=v.allowStateChanges;return v.allowStateChanges=e,t}function Cr(e){v.allowStateChanges=e}var zi;zi=Symbol.toPrimitive;var Ze=function(e){Di(t,e);function t(r,o,s,i,a){var u;return s===void 0&&(s="ObservableValue"),a===void 0&&(a=ht.default),u=e.call(this,s)||this,u.enhancer=void 0,u.name_=void 0,u.equals=void 0,u.hasUnreportedChange_=!1,u.interceptors_=void 0,u.changeListeners_=void 0,u.value_=void 0,u.dehancer=void 0,u.enhancer=o,u.name_=s,u.equals=a,u.value_=o(r,void 0,s),u}var n=t.prototype;return n.dehanceValue=function(o){return this.dehancer!==void 0?this.dehancer(o):o},n.set=function(o){this.value_,o=this.prepareNewValue_(o),o!==v.UNCHANGED&&this.setNewValue_(o)},n.prepareNewValue_=function(o){if(pe(this)){var s=ve(this,{object:this,type:je,newValue:o});if(!s)return v.UNCHANGED;o=s.newValue}return o=this.enhancer(o,this.value_,this.name_),this.equals(this.value_,o)?v.UNCHANGED:o},n.setNewValue_=function(o){var s=this.value_;this.value_=o,this.reportChanged(),Oe(this)&&Se(this,{type:je,object:this,newValue:o,oldValue:s})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(o){return kn(this,o)},n.observe_=function(o,s){return s&&o({observableKind:"value",debugObjectName:this.name_,object:this,type:je,newValue:this.value_,oldValue:void 0}),In(this,o)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return ji(this.get())},n[zi]=function(){return this.valueOf()},t}(Cn),Fo=st("ObservableValue",Ze),Hi;function Bn(e,t){return!!(e&t)}function Un(e,t,n){return n?e|=t:e&=~t,e}Hi=Symbol.toPrimitive;var xe=function(){function e(n){this.dependenciesState_=M.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=M.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new or(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=rr.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||A(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=rt("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?ht.structural:ht.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){Wl(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},t.get=function(){if(this.isComputing&&A(32,this.name_,this.derivation),v.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)fo(this)&&(this.warnAboutUntrackedRead_(),se(),this.value_=this.computeValue_(!1),ie());else if(Zi(this),fo(this)){var r=v.trackingContext;this.keepAlive_&&!r&&(v.trackingContext=this),this.trackAndCompute()&&Gl(this),v.trackingContext=r}var o=this.value_;if(Jn(o))throw o.cause;return o},t.set=function(r){if(this.setter_){this.isRunningSetter&&A(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,r)}finally{this.isRunningSetter=!1}}else A(34,this.name_)},t.trackAndCompute=function(){var r=this.value_,o=this.dependenciesState_===M.NOT_TRACKING_,s=this.computeValue_(!0),i=o||Jn(r)||Jn(s)||!this.equals_(r,s);return i&&(this.value_=s),i},t.computeValue_=function(r){this.isComputing=!0;var o=Tr(!1),s;if(r)s=qi(this,this.derivation,this.scope_);else if(v.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(i){s=new or(i)}return Cr(o),this.isComputing=!1,s},t.suspend_=function(){this.keepAlive_||(ho(this),this.value_=void 0)},t.observe_=function(r,o){var s=this,i=!0,a=void 0;return Uo(function(){var u=s.get();if(!i||o){var l=Pt();r({observableKind:"computed",debugObjectName:s.name_,type:je,object:s,newValue:u,oldValue:a}),Be(l)}i=!1,a=u})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return ji(this.get())},t[Hi]=function(){return this.valueOf()},Or(e,[{key:"isComputing",get:function(){return Bn(this.flags_,e.isComputingMask_)},set:function(r){this.flags_=Un(this.flags_,e.isComputingMask_,r)}},{key:"isRunningSetter",get:function(){return Bn(this.flags_,e.isRunningSetterMask_)},set:function(r){this.flags_=Un(this.flags_,e.isRunningSetterMask_,r)}},{key:"isBeingObserved",get:function(){return Bn(this.flags_,e.isBeingObservedMask_)},set:function(r){this.flags_=Un(this.flags_,e.isBeingObservedMask_,r)}},{key:"isPendingUnobservation",get:function(){return Bn(this.flags_,e.isPendingUnobservationMask_)},set:function(r){this.flags_=Un(this.flags_,e.isPendingUnobservationMask_,r)}}]),e}();xe.isComputingMask_=1;xe.isRunningSetterMask_=2;xe.isBeingObservedMask_=4;xe.isPendingUnobservationMask_=8;var vt=st("ComputedValue",xe),M;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(M||(M={}));var rr;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(rr||(rr={}));var or=function(t){this.cause=void 0,this.cause=t};function Jn(e){return e instanceof or}function fo(e){switch(e.dependenciesState_){case M.UP_TO_DATE_:return!1;case M.NOT_TRACKING_:case M.STALE_:return!0;case M.POSSIBLY_STALE_:{for(var t=Pr(!0),n=Pt(),r=e.observing_,o=r.length,s=0;s<o;s++){var i=r[s];if(vt(i)){if(v.disableErrorBoundaries)i.get();else try{i.get()}catch{return Be(n),Nt(t),!0}if(e.dependenciesState_===M.STALE_)return Be(n),Nt(t),!0}}return Ji(e),Be(n),Nt(t),!1}}}function xl(){return v.trackingDerivation!==null}function qi(e,t,n){var r=Pr(!0);Ji(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++v.runId;var o=v.trackingDerivation;v.trackingDerivation=e,v.inBatch++;var s;if(v.disableErrorBoundaries===!0)s=t.call(n);else try{s=t.call(n)}catch(i){s=new or(i)}return v.inBatch--,v.trackingDerivation=o,Rl(e),Nt(r),s}function Rl(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=M.UP_TO_DATE_,o=0,s=e.unboundDepsCount_,i=0;i<s;i++){var a=n[i];a.diffValue_===0&&(a.diffValue_=1,o!==i&&(n[o]=a),o++),a.dependenciesState_>r&&(r=a.dependenciesState_)}for(n.length=o,e.newObserving_=null,s=t.length;s--;){var u=t[s];u.diffValue_===0&&Yi(u,e),u.diffValue_=0}for(;o--;){var l=n[o];l.diffValue_===1&&(l.diffValue_=0,Ul(l,e))}r!==M.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}function ho(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Yi(t[n],e);e.dependenciesState_=M.NOT_TRACKING_}function Bo(e){var t=Pt();try{return e()}finally{Be(t)}}function Pt(){var e=v.trackingDerivation;return v.trackingDerivation=null,e}function Be(e){v.trackingDerivation=e}function Pr(e){var t=v.allowStateReads;return v.allowStateReads=e,t}function Nt(e){v.allowStateReads=e}function Ji(e){if(e.dependenciesState_!==M.UP_TO_DATE_){e.dependenciesState_=M.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=M.UP_TO_DATE_}}var Nl=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],ln=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Xn=!0,Xi=!1,v=function(){var e=Ro();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Xn=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new ln().version&&(Xn=!1),Xn?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new ln):(setTimeout(function(){Xi||A(35)},1),new ln)}();function $l(){if((v.pendingReactions.length||v.inBatch||v.isRunningReactions)&&A(36),Xi=!0,Xn){var e=Ro();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),v=new ln}}function Vl(){return v}function Ll(){var e=new ln;for(var t in e)Nl.indexOf(t)===-1&&(v[t]=e[t]);v.allowStateChanges=!v.enforceActions}function Fl(e){return e.observers_&&e.observers_.size>0}function Bl(e){return e.observers_}function Ul(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Yi(e,t){e.observers_.delete(t),e.observers_.size===0&&Qi(e)}function Qi(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,v.pendingUnobservations.push(e))}function se(){v.inBatch++}function ie(){if(--v.inBatch===0){ta();for(var e=v.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,n.observers_.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof xe&&n.suspend_())}v.pendingUnobservations=[]}}function Zi(e){var t=v.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&v.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&v.inBatch>0&&Qi(e),!1)}function ea(e){e.lowestObserverState_!==M.STALE_&&(e.lowestObserverState_=M.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===M.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=M.STALE_}))}function Gl(e){e.lowestObserverState_!==M.STALE_&&(e.lowestObserverState_=M.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===M.POSSIBLY_STALE_?t.dependenciesState_=M.STALE_:t.dependenciesState_===M.UP_TO_DATE_&&(e.lowestObserverState_=M.UP_TO_DATE_)}))}function Wl(e){e.lowestObserverState_===M.UP_TO_DATE_&&(e.lowestObserverState_=M.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===M.UP_TO_DATE_&&(t.dependenciesState_=M.POSSIBLY_STALE_,t.onBecomeStale_())}))}var pn=function(){function e(n,r,o,s){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=M.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=rr.NONE,this.name_=n,this.onInvalidate_=r,this.errorHandler_=o,this.requiresObservable_=s}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,v.pendingReactions.push(this),ta())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){se(),this.isScheduled_=!1;var r=v.trackingContext;if(v.trackingContext=this,fo(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(o){this.reportExceptionInDerivation_(o)}}v.trackingContext=r,ie()}},t.track=function(r){if(!this.isDisposed_){se(),this.isRunning_=!0;var o=v.trackingContext;v.trackingContext=this;var s=qi(this,r,void 0);v.trackingContext=o,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&ho(this),Jn(s)&&this.reportExceptionInDerivation_(s.cause),ie()}},t.reportExceptionInDerivation_=function(r){var o=this;if(this.errorHandler_){this.errorHandler_(r,this);return}if(v.disableErrorBoundaries)throw r;var s="[mobx] uncaught error in '"+this+"'";v.suppressReactionErrors||console.error(s,r),v.globalReactionErrorHandlers.forEach(function(i){return i(r,o)})},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(se(),ho(this),ie()))},t.getDisposer_=function(r){var o=this,s=function i(){o.dispose(),r==null||r.removeEventListener==null||r.removeEventListener("abort",i)};return r==null||r.addEventListener==null||r.addEventListener("abort",s),s[b]=this,s},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(r){},e}();function Kl(e){return v.globalReactionErrorHandlers.push(e),function(){var t=v.globalReactionErrorHandlers.indexOf(e);t>=0&&v.globalReactionErrorHandlers.splice(t,1)}}var zl=100,po=function(t){return t()};function ta(){v.inBatch>0||v.isRunningReactions||po(Hl)}function Hl(){v.isRunningReactions=!0;for(var e=v.pendingReactions,t=0;e.length>0;){++t===zl&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,o=n.length;r<o;r++)n[r].runReaction_()}v.isRunningReactions=!1}var sr=st("Reaction",pn);function ql(e){var t=po;po=function(r){return e(function(){return t(r)})}}function cn(){return!1}function na(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ra="action",Jl="action.bound",oa="autoAction",Xl="autoAction.bound",sa="<unnamed action>",vo=Pn(ra),Yl=Pn(Jl,{bound:!0}),mo=Pn(oa,{autoAction:!0}),Ql=Pn(Xl,{autoAction:!0,bound:!0});function ia(e){var t=function(r,o){if(ce(r))return rt(r.name||sa,r,e);if(ce(o))return rt(r,o,e);if(Tn(o))return(e?mo:vo).decorate_20223_(r,o);if(dt(o))return Jt(r,o,e?mo:vo);if(dt(r))return we(Pn(e?oa:ra,{name:r,autoAction:e}))};return t}var O=ia(!1);Object.assign(O,vo);var Ft=ia(!0);Object.assign(Ft,mo);O.bound=we(Yl);Ft.bound=we(Ql);function yo(e){return Gi(e.name||sa,!1,e,this,void 0)}function Xt(e){return ce(e)&&e.isMobxAction===!0}function Uo(e,t){var n,r,o,s,i;t===void 0&&(t=No);var a=(n=(r=t)==null?void 0:r.name)!=null?n:"Autorun",u=!t.scheduler&&!t.delay,l;if(u)l=new pn(a,function(){this.track(d)},t.onError,t.requiresObservable);else{var c=aa(t),f=!1;l=new pn(a,function(){f||(f=!0,c(function(){f=!1,l.isDisposed_||l.track(d)}))},t.onError,t.requiresObservable)}function d(){e(l)}return(o=t)!=null&&(s=o.signal)!=null&&s.aborted||l.schedule_(),l.getDisposer_((i=t)==null?void 0:i.signal)}var Zl=function(t){return t()};function aa(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Zl}function Bt(e,t,n){var r,o,s,i;n===void 0&&(n=No);var a=(r=n.name)!=null?r:"Reaction",u=O(a,n.onError?ec(n.onError,t):t),l=!n.scheduler&&!n.delay,c=aa(n),f=!0,d=!1,h,m=n.compareStructural?ht.structural:n.equals||ht.default,_=new pn(a,function(){f||l?S():d||(d=!0,c(S))},n.onError,n.requiresObservable);function S(){if(d=!1,!_.isDisposed_){var C=!1,j=h;_.track(function(){var w=Lo(!1,function(){return e(_)});C=f||!m(h,w),h=w}),(f&&n.fireImmediately||!f&&C)&&u(h,j,_),f=!1}}return(o=n)!=null&&(s=o.signal)!=null&&s.aborted||_.schedule_(),_.getDisposer_((i=n)==null?void 0:i.signal)}function ec(e,t){return function(){try{return t.apply(this,arguments)}catch(n){e.call(this,n)}}}var tc="onBO",nc="onBUO";function ua(e,t,n){return la(tc,e,t,n)}function Go(e,t,n){return la(nc,e,t,n)}function la(e,t,n,r){var o=typeof r=="function"?We(t,n):We(t),s=ce(r)?r:n,i=e+"L";return o[i]?o[i].add(s):o[i]=new Set([s]),function(){var a=o[i];a&&(a.delete(s),a.size===0&&delete o[i])}}var rc="never",Gn="always",oc="observed";function ca(e){e.isolateGlobalState===!0&&$l();var t=e.useProxies,n=e.enforceActions;if(t!==void 0&&(v.useProxies=t===Gn?!0:t===rc?!1:typeof Proxy<"u"),t==="ifavailable"&&(v.verifyProxies=!0),n!==void 0){var r=n===Gn?Gn:n===oc;v.enforceActions=r,v.allowStateChanges=!(r===!0||r===Gn)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(o){o in e&&(v[o]=!!e[o])}),v.allowStateReads=!v.observableRequiresReaction,e.reactionScheduler&&ql(e.reactionScheduler)}function Wo(e,t,n,r){var o=Nu(t);return it(function(){var s=It(e,r)[b];Lt(o).forEach(function(i){s.extend_(i,o[i],n&&i in n?n[i]:!0)})}),e}function sc(e,t){return fa(We(e,t))}function fa(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=ac(e.observing_).map(fa)),t}function ic(e,t){return da(We(e,t))}function da(e){var t={name:e.name_};return Fl(e)&&(t.observers=Array.from(Bl(e)).map(da)),t}function ac(e){return Array.from(new Set(e))}var uc=0;function kr(){this.message="FLOW_CANCELLED"}kr.prototype=Object.create(Error.prototype);function lc(e){return e instanceof kr}var qr=Ni("flow"),cc=Ni("flow.bound",{bound:!0}),mt=Object.assign(function(t,n){if(Tn(n))return qr.decorate_20223_(t,n);if(dt(n))return Jt(t,n,qr);var r=t,o=r.name||"<unnamed flow>",s=function(){var a=this,u=arguments,l=++uc,c=O(o+" - runid: "+l+" - init",r).apply(a,u),f,d=void 0,h=new Promise(function(m,_){var S=0;f=_;function C(g){d=void 0;var P;try{P=O(o+" - runid: "+l+" - yield "+S++,c.next).call(c,g)}catch(x){return _(x)}w(P)}function j(g){d=void 0;var P;try{P=O(o+" - runid: "+l+" - yield "+S++,c.throw).call(c,g)}catch(x){return _(x)}w(P)}function w(g){if(ce(g==null?void 0:g.then)){g.then(w,_);return}return g.done?m(g.value):(d=Promise.resolve(g.value),d.then(C,j))}C(void 0)});return h.cancel=O(o+" - runid: "+l+" - cancel",function(){try{d&&Is(d);var m=c.return(void 0),_=Promise.resolve(m.value);_.then(xt,xt),Is(_),f(new kr)}catch(S){f(S)}}),h};return s.isMobXFlow=!0,s},qr);mt.bound=we(cc);function Is(e){ce(e.cancel)&&e.cancel()}function fc(e){return e}function Ut(e){return(e==null?void 0:e.isMobXFlow)===!0}function dc(e,t,n){var r;return K(e)||Q(e)||Fo(e)?r=Ke(e):L(e)&&(r=Ke(e,t)),r.dehancer=typeof t=="function"?t:n,function(){r.dehancer=void 0}}function Yt(e,t,n){return ce(n)?pc(e,t,n):hc(e,t)}function hc(e,t){return Ke(e).intercept_(t)}function pc(e,t,n){return Ke(e,t).intercept_(n)}function ha(e,t){if(t===void 0)return vt(e);if(L(e)===!1||!e[b].values_.has(t))return!1;var n=We(e,t);return vt(n)}function vc(e){return ha(e)}function mc(e,t){return ha(e,t)}function pa(e,t){return e?t!==void 0?L(e)?e[b].values_.has(t):!1:L(e)||!!e[b]||$o(e)||sr(e)||vt(e):!1}function Ge(e){return pa(e)}function yc(e,t){return pa(e,t)}function yt(e){if(L(e))return e[b].keys_();if(K(e)||ee(e))return Array.from(e.keys());if(Q(e))return e.map(function(t,n){return n});A(5)}function Ko(e){if(L(e))return yt(e).map(function(t){return e[t]});if(K(e))return yt(e).map(function(t){return e.get(t)});if(ee(e))return Array.from(e.values());if(Q(e))return e.slice();A(6)}function va(e){if(L(e))return yt(e).map(function(t){return[t,e[t]]});if(K(e))return yt(e).map(function(t){return[t,e.get(t)]});if(ee(e))return Array.from(e.entries());if(Q(e))return e.map(function(t,n){return[n,t]});A(7)}function Ye(e,t,n){if(arguments.length===2&&!ee(e)){se();var r=t;try{for(var o in r)Ye(e,o,r[o])}finally{ie()}return}L(e)?e[b].set_(t,n):K(e)?e.set(t,n):ee(e)?e.add(t):Q(e)?(typeof t!="number"&&(t=parseInt(t,10)),t<0&&A("Invalid index: '"+t+"'"),se(),t>=e.length&&(e.length=t+1),e[t]=n,ie()):A(8)}function Ae(e,t){L(e)?e[b].delete_(t):K(e)||ee(e)?e.delete(t):Q(e)?(typeof t!="number"&&(t=parseInt(t,10)),e.splice(t,1)):A(9)}function zo(e,t){if(L(e))return e[b].has_(t);if(K(e))return e.has(t);if(ee(e))return e.has(t);if(Q(e))return t>=0&&t<e.length;A(10)}function ma(e,t){if(zo(e,t)){if(L(e))return e[b].get_(t);if(K(e))return e.get(t);if(Q(e))return e[t];A(11)}}function _c(e,t,n){if(L(e))return e[b].defineProperty_(t,n);A(39)}function ya(e){if(L(e))return e[b].ownKeys_();A(38)}function kt(e,t,n,r){return ce(n)?gc(e,t,n,r):bc(e,t,n)}function bc(e,t,n){return Ke(e).observe_(t,n)}function gc(e,t,n,r){return Ke(e,t).observe_(n,r)}function Wn(e,t,n){return e.set(t,n),n}function Dt(e,t){if(e==null||typeof e!="object"||e instanceof Date||!Ge(e))return e;if(Fo(e)||vt(e))return Dt(e.get(),t);if(t.has(e))return t.get(e);if(Q(e)){var n=Wn(t,e,new Array(e.length));return e.forEach(function(i,a){n[a]=Dt(i,t)}),n}if(ee(e)){var r=Wn(t,e,new Set);return e.forEach(function(i){r.add(Dt(i,t))}),r}if(K(e)){var o=Wn(t,e,new Map);return e.forEach(function(i,a){o.set(a,Dt(i,t))}),o}else{var s=Wn(t,e,{});return ya(e).forEach(function(i){On.propertyIsEnumerable.call(e,i)&&(s[i]=Dt(e[i],t))}),s}}function _o(e,t){return Dt(e,new Map)}function wc(){}function Ie(e,t){t===void 0&&(t=void 0),se();try{return e.apply(t)}finally{ie()}}function Oc(e,t,n){return arguments.length===1||t&&typeof t=="object"?Sc(e,t):_a(e,t,n||{})}function _a(e,t,n){var r;if(typeof n.timeout=="number"){var o=new Error("WHEN_TIMEOUT");r=setTimeout(function(){if(!i[b].isDisposed_)if(i(),n.onError)n.onError(o);else throw o},n.timeout)}n.name="When";var s=rt("When-effect",t),i=Uo(function(a){var u=Lo(!1,e);u&&(a.dispose(),r&&clearTimeout(r),s())},n);return i}function Sc(e,t){var n;if(t!=null&&(n=t.signal)!=null&&n.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var r,o,s=new Promise(function(i,a){var u,l=_a(e,i,nt({},t,{onError:a}));r=function(){l(),a(new Error("WHEN_CANCELLED"))},o=function(){l(),a(new Error("WHEN_ABORTED"))},t==null||(u=t.signal)==null||u.addEventListener==null||u.addEventListener("abort",o)}).finally(function(){var i;return t==null||(i=t.signal)==null||i.removeEventListener==null?void 0:i.removeEventListener("abort",o)});return s.cancel=r,s}function Mt(e){return e[b]}var Ac={has:function(t,n){return Mt(t).has_(n)},get:function(t,n){return Mt(t).get_(n)},set:function(t,n,r){var o;return dt(n)?(o=Mt(t).set_(n,r,!0))!=null?o:!0:!1},deleteProperty:function(t,n){var r;return dt(n)?(r=Mt(t).delete_(n,!0))!=null?r:!0:!1},defineProperty:function(t,n,r){var o;return(o=Mt(t).defineProperty_(n,r))!=null?o:!0},ownKeys:function(t){return Mt(t).ownKeys_()},preventExtensions:function(t){A(13)}};function Tc(e,t){var n,r;return Pi(),e=It(e,t),(r=(n=e[b]).proxy_)!=null?r:n.proxy_=new Proxy(e,Ac)}function pe(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function kn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),ki(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function ve(e,t){var n=Pt();try{for(var r=[].concat(e.interceptors_||[]),o=0,s=r.length;o<s&&(t=r[o](t),t&&!t.type&&A(14),!!t);o++);return t}finally{Be(n)}}function Oe(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function In(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),ki(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function Se(e,t){var n=Pt(),r=e.changeListeners_;if(r){r=r.slice();for(var o=0,s=r.length;o<s;o++)r[o](t);Be(n)}}function Cc(e,t,n){return it(function(){var r,o=It(e,n)[b];(r=t)!=null||(t=Bu(e)),Lt(t).forEach(function(s){return o.make_(s,t[s])})}),e}var Jr=Symbol("mobx-keys");function Pc(e,t,n){return Ue(e)?Wo(e,e,t,n):(it(function(){var r=It(e,n)[b];if(!e[Jr]){var o=Object.getPrototypeOf(e),s=new Set([].concat(Lt(e),Lt(o)));s.delete("constructor"),s.delete(b),Sn(o,Jr,s)}e[Jr].forEach(function(i){return r.make_(i,t&&i in t?t[i]:!0)})}),e)}var Es="splice",je="update",kc=1e4,Ic={get:function(t,n){var r=t[b];return n===b?r:n==="length"?r.getArrayLength_():typeof n=="string"&&!isNaN(n)?r.get_(parseInt(n)):Fe(ir,n)?ir[n]:t[n]},set:function(t,n,r){var o=t[b];return n==="length"&&o.setArrayLength_(r),typeof n=="symbol"||isNaN(n)?t[n]=r:o.set_(parseInt(n),r),!0},preventExtensions:function(){A(15)}},Ho=function(){function e(n,r,o,s){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=o,this.legacyMode_=s,this.atom_=new Cn(n),this.enhancer_=function(i,a){return r(i,a,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.dehanceValues_=function(r){return this.dehancer!==void 0&&r.length>0?r.map(this.dehancer):r},t.intercept_=function(r){return kn(this,r)},t.observe_=function(r,o){return o===void 0&&(o=!1),o&&r({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),In(this,r)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(r){(typeof r!="number"||isNaN(r)||r<0)&&A("Out of range: "+r);var o=this.values_.length;if(r!==o)if(r>o){for(var s=new Array(r-o),i=0;i<r-o;i++)s[i]=void 0;this.spliceWithArray_(o,0,s)}else this.spliceWithArray_(r,o-r)},t.updateArrayLength_=function(r,o){r!==this.lastKnownLength_&&A(16),this.lastKnownLength_+=o,this.legacyMode_&&o>0&&Pa(r+o+1)},t.spliceWithArray_=function(r,o,s){var i=this;this.atom_;var a=this.values_.length;if(r===void 0?r=0:r>a?r=a:r<0&&(r=Math.max(0,a+r)),arguments.length===1?o=a-r:o==null?o=0:o=Math.max(0,Math.min(o,a-r)),s===void 0&&(s=ao),pe(this)){var u=ve(this,{object:this.proxy_,type:Es,index:r,removedCount:o,added:s});if(!u)return ao;o=u.removedCount,s=u.added}if(s=s.length===0?s:s.map(function(f){return i.enhancer_(f,void 0)}),this.legacyMode_){var l=s.length-o;this.updateArrayLength_(a,l)}var c=this.spliceItemsIntoValues_(r,o,s);return(o!==0||s.length!==0)&&this.notifyArraySplice_(r,s,c),this.dehanceValues_(c)},t.spliceItemsIntoValues_=function(r,o,s){if(s.length<kc){var i;return(i=this.values_).splice.apply(i,[r,o].concat(s))}else{var a=this.values_.slice(r,r+o),u=this.values_.slice(r+o);this.values_.length+=s.length-o;for(var l=0;l<s.length;l++)this.values_[r+l]=s[l];for(var c=0;c<u.length;c++)this.values_[r+s.length+c]=u[c];return a}},t.notifyArrayChildUpdate_=function(r,o,s){var i=!this.owned_&&cn(),a=Oe(this),u=a||i?{observableKind:"array",object:this.proxy_,type:je,debugObjectName:this.atom_.name_,index:r,newValue:o,oldValue:s}:null;this.atom_.reportChanged(),a&&Se(this,u)},t.notifyArraySplice_=function(r,o,s){var i=!this.owned_&&cn(),a=Oe(this),u=a||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Es,index:r,removed:s,added:o,removedCount:s.length,addedCount:o.length}:null;this.atom_.reportChanged(),a&&Se(this,u)},t.get_=function(r){if(this.legacyMode_&&r>=this.values_.length){console.warn("[mobx] Out of bounds read: "+r);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[r])},t.set_=function(r,o){var s=this.values_;if(this.legacyMode_&&r>s.length&&A(17,r,s.length),r<s.length){this.atom_;var i=s[r];if(pe(this)){var a=ve(this,{type:je,object:this.proxy_,index:r,newValue:o});if(!a)return;o=a.newValue}o=this.enhancer_(o,i);var u=o!==i;u&&(s[r]=o,this.notifyArrayChildUpdate_(r,o,i))}else{for(var l=new Array(r+1-s.length),c=0;c<l.length-1;c++)l[c]=void 0;l[l.length-1]=o,this.spliceWithArray_(s.length,0,l)}},e}();function Ec(e,t,n,r){return n===void 0&&(n="ObservableArray"),r===void 0&&(r=!1),Pi(),it(function(){var o=new Ho(n,t,r,!1);Ei(o.values_,b,o);var s=new Proxy(o.values_,Ic);return o.proxy_=s,e&&e.length&&o.spliceWithArray_(0,0,e),s})}var ir={clear:function(){return this.splice(0)},replace:function(t){var n=this[b];return n.spliceWithArray_(0,n.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];var i=this[b];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray_(t);case 2:return i.spliceWithArray_(t,n)}return i.spliceWithArray_(t,n,o)},spliceWithArray:function(t,n,r){return this[b].spliceWithArray_(t,n,r)},push:function(){for(var t=this[b],n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.spliceWithArray_(t.values_.length,0,r),t.values_.length},pop:function(){return this.splice(Math.max(this[b].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[b],n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.spliceWithArray_(0,0,r),t.values_.length},reverse:function(){return v.trackingDerivation&&A(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){v.trackingDerivation&&A(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var n=this[b],r=n.dehanceValues_(n.values_).indexOf(t);return r>-1?(this.splice(r,1),!0):!1}};D("at",de);D("concat",de);D("flat",de);D("includes",de);D("indexOf",de);D("join",de);D("lastIndexOf",de);D("slice",de);D("toString",de);D("toLocaleString",de);D("toSorted",de);D("toSpliced",de);D("with",de);D("every",Pe);D("filter",Pe);D("find",Pe);D("findIndex",Pe);D("findLast",Pe);D("findLastIndex",Pe);D("flatMap",Pe);D("forEach",Pe);D("map",Pe);D("some",Pe);D("toReversed",Pe);D("reduce",ba);D("reduceRight",ba);function D(e,t){typeof Array.prototype[e]=="function"&&(ir[e]=t(e))}function de(e){return function(){var t=this[b];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Pe(e){return function(t,n){var r=this,o=this[b];o.atom_.reportObserved();var s=o.dehanceValues_(o.values_);return s[e](function(i,a){return t.call(n,i,a,r)})}}function ba(e){return function(){var t=this,n=this[b];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),o=arguments[0];return arguments[0]=function(s,i,a){return o(s,i,a,t)},r[e].apply(r,arguments)}}var Mc=st("ObservableArrayAdministration",Ho);function Q(e){return wr(e)&&Mc(e[b])}var ga,wa,jc={},Qe="add",ar="delete";ga=Symbol.iterator;wa=Symbol.toStringTag;var qo=function(){function e(n,r,o){var s=this;r===void 0&&(r=pt),o===void 0&&(o="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[b]=jc,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=r,this.name_=o,ce(Map)||A(18),it(function(){s.keysAtom_=Xe("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,n&&s.merge(n)})}var t=e.prototype;return t.has_=function(r){return this.data_.has(r)},t.has=function(r){var o=this;if(!v.trackingDerivation)return this.has_(r);var s=this.hasMap_.get(r);if(!s){var i=s=new Ze(this.has_(r),Sr,"ObservableMap.key?",!1);this.hasMap_.set(r,i),Go(i,function(){return o.hasMap_.delete(r)})}return s.get()},t.set=function(r,o){var s=this.has_(r);if(pe(this)){var i=ve(this,{type:s?je:Qe,object:this,newValue:o,name:r});if(!i)return this;o=i.newValue}return s?this.updateValue_(r,o):this.addValue_(r,o),this},t.delete=function(r){var o=this;if(this.keysAtom_,pe(this)){var s=ve(this,{type:ar,object:this,name:r});if(!s)return!1}if(this.has_(r)){var i=cn(),a=Oe(this),u=a||i?{observableKind:"map",debugObjectName:this.name_,type:ar,object:this,oldValue:this.data_.get(r).value_,name:r}:null;return Ie(function(){var l;o.keysAtom_.reportChanged(),(l=o.hasMap_.get(r))==null||l.setNewValue_(!1);var c=o.data_.get(r);c.setNewValue_(void 0),o.data_.delete(r)}),a&&Se(this,u),!0}return!1},t.updateValue_=function(r,o){var s=this.data_.get(r);if(o=s.prepareNewValue_(o),o!==v.UNCHANGED){var i=cn(),a=Oe(this),u=a||i?{observableKind:"map",debugObjectName:this.name_,type:je,object:this,oldValue:s.value_,name:r,newValue:o}:null;s.setNewValue_(o),a&&Se(this,u)}},t.addValue_=function(r,o){var s=this;this.keysAtom_,Ie(function(){var l,c=new Ze(o,s.enhancer_,"ObservableMap.key",!1);s.data_.set(r,c),o=c.value_,(l=s.hasMap_.get(r))==null||l.setNewValue_(!0),s.keysAtom_.reportChanged()});var i=cn(),a=Oe(this),u=a||i?{observableKind:"map",debugObjectName:this.name_,type:Qe,object:this,name:r,newValue:o}:null;a&&Se(this,u)},t.get=function(r){return this.has(r)?this.dehanceValue_(this.data_.get(r).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var r=this,o=this.keys();return vn({next:function(){var i=o.next(),a=i.done,u=i.value;return{done:a,value:a?void 0:r.get(u)}}})},t.entries=function(){var r=this,o=this.keys();return vn({next:function(){var i=o.next(),a=i.done,u=i.value;return{done:a,value:a?void 0:[u,r.get(u)]}}})},t[ga]=function(){return this.entries()},t.forEach=function(r,o){for(var s=Rt(this),i;!(i=s()).done;){var a=i.value,u=a[0],l=a[1];r.call(o,l,u,this)}},t.merge=function(r){var o=this;return K(r)&&(r=new Map(r)),Ie(function(){Ue(r)?Ru(r).forEach(function(s){return o.set(s,r[s])}):Array.isArray(r)?r.forEach(function(s){var i=s[0],a=s[1];return o.set(i,a)}):qt(r)?(r.constructor!==Map&&A(19,r),r.forEach(function(s,i){return o.set(i,s)})):r!=null&&A(20,r)}),this},t.clear=function(){var r=this;Ie(function(){Bo(function(){for(var o=Rt(r.keys()),s;!(s=o()).done;){var i=s.value;r.delete(i)}})})},t.replace=function(r){var o=this;return Ie(function(){for(var s=Dc(r),i=new Map,a=!1,u=Rt(o.data_.keys()),l;!(l=u()).done;){var c=l.value;if(!s.has(c)){var f=o.delete(c);if(f)a=!0;else{var d=o.data_.get(c);i.set(c,d)}}}for(var h=Rt(s.entries()),m;!(m=h()).done;){var _=m.value,S=_[0],C=_[1],j=o.data_.has(S);if(o.set(S,C),o.data_.has(S)){var w=o.data_.get(S);i.set(S,w),j||(a=!0)}}if(!a)if(o.data_.size!==i.size)o.keysAtom_.reportChanged();else for(var g=o.data_.keys(),P=i.keys(),x=g.next(),F=P.next();!x.done;){if(x.value!==F.value){o.keysAtom_.reportChanged();break}x=g.next(),F=P.next()}o.data_=i}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(r,o){return In(this,r)},t.intercept_=function(r){return kn(this,r)},Or(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:wa,get:function(){return"Map"}}]),e}(),K=st("ObservableMap",qo);function Dc(e){if(qt(e)||K(e))return e;if(Array.isArray(e))return new Map(e);if(Ue(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}else return A(21,e)}var Oa,Sa,xc={};Oa=Symbol.iterator;Sa=Symbol.toStringTag;var Jo=function(){function e(n,r,o){var s=this;r===void 0&&(r=pt),o===void 0&&(o="ObservableSet"),this.name_=void 0,this[b]=xc,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=o,ce(Set)||A(22),this.enhancer_=function(i,a){return r(i,a,o)},it(function(){s.atom_=Xe(s.name_),n&&s.replace(n)})}var t=e.prototype;return t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.clear=function(){var r=this;Ie(function(){Bo(function(){for(var o=Rt(r.data_.values()),s;!(s=o()).done;){var i=s.value;r.delete(i)}})})},t.forEach=function(r,o){for(var s=Rt(this),i;!(i=s()).done;){var a=i.value;r.call(o,a,a,this)}},t.add=function(r){var o=this;if(this.atom_,pe(this)){var s=ve(this,{type:Qe,object:this,newValue:r});if(!s)return this}if(!this.has(r)){Ie(function(){o.data_.add(o.enhancer_(r,void 0)),o.atom_.reportChanged()});var i=!1,a=Oe(this),u=a||i?{observableKind:"set",debugObjectName:this.name_,type:Qe,object:this,newValue:r}:null;a&&Se(this,u)}return this},t.delete=function(r){var o=this;if(pe(this)){var s=ve(this,{type:ar,object:this,oldValue:r});if(!s)return!1}if(this.has(r)){var i=!1,a=Oe(this),u=a||i?{observableKind:"set",debugObjectName:this.name_,type:ar,object:this,oldValue:r}:null;return Ie(function(){o.atom_.reportChanged(),o.data_.delete(r)}),a&&Se(this,u),!0}return!1},t.has=function(r){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(r))},t.entries=function(){var r=0,o=Array.from(this.keys()),s=Array.from(this.values());return vn({next:function(){var a=r;return r+=1,a<s.length?{value:[o[a],s[a]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var r=this,o=0,s=Array.from(this.data_.values());return vn({next:function(){return o<s.length?{value:r.dehanceValue_(s[o++]),done:!1}:{done:!0}}})},t.replace=function(r){var o=this;return ee(r)&&(r=new Set(r)),Ie(function(){Array.isArray(r)?(o.clear(),r.forEach(function(s){return o.add(s)})):An(r)?(o.clear(),r.forEach(function(s){return o.add(s)})):r!=null&&A("Cannot initialize set from "+r)}),this},t.observe_=function(r,o){return In(this,r)},t.intercept_=function(r){return kn(this,r)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Oa]=function(){return this.values()},Or(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Sa,get:function(){return"Set"}}]),e}(),ee=st("ObservableSet",Jo),Ms=Object.create(null),js="remove",Aa=function(){function e(n,r,o,s){r===void 0&&(r=new Map),s===void 0&&(s=ml),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=r,this.name_=o,this.defaultAnnotation_=s,this.keysAtom_=new Cn("ObservableObject.keys"),this.isPlainObject_=Ue(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(r){return this.values_.get(r).get()},t.setObservablePropValue_=function(r,o){var s=this.values_.get(r);if(s instanceof xe)return s.set(o),!0;if(pe(this)){var i=ve(this,{type:je,object:this.proxy_||this.target_,name:r,newValue:o});if(!i)return null;o=i.newValue}if(o=s.prepareNewValue_(o),o!==v.UNCHANGED){var a=Oe(this),u=!1,l=a||u?{type:je,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:r,newValue:o}:null;s.setNewValue_(o),a&&Se(this,l)}return!0},t.get_=function(r){return v.trackingDerivation&&!Fe(this.target_,r)&&this.has_(r),this.target_[r]},t.set_=function(r,o,s){return s===void 0&&(s=!1),Fe(this.target_,r)?this.values_.has(r)?this.setObservablePropValue_(r,o):s?Reflect.set(this.target_,r,o):(this.target_[r]=o,!0):this.extend_(r,{value:o,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},t.has_=function(r){if(!v.trackingDerivation)return r in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var o=this.pendingKeys_.get(r);return o||(o=new Ze(r in this.target_,Sr,"ObservableObject.key?",!1),this.pendingKeys_.set(r,o)),o.get()},t.make_=function(r,o){if(o===!0&&(o=this.defaultAnnotation_),o!==!1){if(!(r in this.target_)){var s;if((s=this.target_[Ee])!=null&&s[r])return;A(1,o.annotationType_,this.name_+"."+r.toString())}for(var i=this.target_;i&&i!==On;){var a=tr(i,r);if(a){var u=o.make_(this,r,a,i);if(u===0)return;if(u===1)break}i=Object.getPrototypeOf(i)}xs(this,o,r)}},t.extend_=function(r,o,s,i){if(i===void 0&&(i=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(r,o,i);var a=s.extend_(this,r,o,i);return a&&xs(this,s,r),a},t.defineProperty_=function(r,o,s){s===void 0&&(s=!1),this.keysAtom_;try{se();var i=this.delete_(r);if(!i)return i;if(pe(this)){var a=ve(this,{object:this.proxy_||this.target_,name:r,type:Qe,newValue:o.value});if(!a)return null;var u=a.newValue;o.value!==u&&(o=nt({},o,{value:u}))}if(s){if(!Reflect.defineProperty(this.target_,r,o))return!1}else Me(this.target_,r,o);this.notifyPropertyAddition_(r,o.value)}finally{ie()}return!0},t.defineObservableProperty_=function(r,o,s,i){i===void 0&&(i=!1),this.keysAtom_;try{se();var a=this.delete_(r);if(!a)return a;if(pe(this)){var u=ve(this,{object:this.proxy_||this.target_,name:r,type:Qe,newValue:o});if(!u)return null;o=u.newValue}var l=Ds(r),c={configurable:v.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:l.get,set:l.set};if(i){if(!Reflect.defineProperty(this.target_,r,c))return!1}else Me(this.target_,r,c);var f=new Ze(o,s,"ObservableObject.key",!1);this.values_.set(r,f),this.notifyPropertyAddition_(r,f.value_)}finally{ie()}return!0},t.defineComputedProperty_=function(r,o,s){s===void 0&&(s=!1),this.keysAtom_;try{se();var i=this.delete_(r);if(!i)return i;if(pe(this)){var a=ve(this,{object:this.proxy_||this.target_,name:r,type:Qe,newValue:void 0});if(!a)return null}o.name||(o.name="ObservableObject.key"),o.context=this.proxy_||this.target_;var u=Ds(r),l={configurable:v.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:u.get,set:u.set};if(s){if(!Reflect.defineProperty(this.target_,r,l))return!1}else Me(this.target_,r,l);this.values_.set(r,new xe(o)),this.notifyPropertyAddition_(r,void 0)}finally{ie()}return!0},t.delete_=function(r,o){if(o===void 0&&(o=!1),this.keysAtom_,!Fe(this.target_,r))return!0;if(pe(this)){var s=ve(this,{object:this.proxy_||this.target_,name:r,type:js});if(!s)return null}try{var i,a;se();var u=Oe(this),l=!1,c=this.values_.get(r),f=void 0;if(!c&&(u||l)){var d;f=(d=tr(this.target_,r))==null?void 0:d.value}if(o){if(!Reflect.deleteProperty(this.target_,r))return!1}else delete this.target_[r];if(c&&(this.values_.delete(r),c instanceof Ze&&(f=c.value_),ea(c)),this.keysAtom_.reportChanged(),(i=this.pendingKeys_)==null||(a=i.get(r))==null||a.set(r in this.target_),u||l){var h={type:js,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:f,name:r};u&&Se(this,h)}}finally{ie()}return!0},t.observe_=function(r,o){return In(this,r)},t.intercept_=function(r){return kn(this,r)},t.notifyPropertyAddition_=function(r,o){var s,i,a=Oe(this),u=!1;if(a||u){var l=a||u?{type:Qe,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:r,newValue:o}:null;a&&Se(this,l)}(s=this.pendingKeys_)==null||(i=s.get(r))==null||i.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Lt(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function It(e,t){var n;if(Fe(e,b))return e;var r=(n=t==null?void 0:t.name)!=null?n:"ObservableObject",o=new Aa(e,new Map,String(r),Pl(t));return Sn(e,b,o),e}var Rc=st("ObservableObjectAdministration",Aa);function Ds(e){return Ms[e]||(Ms[e]={get:function(){return this[b].getObservablePropValue_(e)},set:function(n){return this[b].setObservablePropValue_(e,n)}})}function L(e){return wr(e)?Rc(e[b]):!1}function xs(e,t,n){var r;(r=e.target_[Ee])==null||delete r[n]}var Nc=Ca(0),$c=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),Xr=0,Ta=function(){};function Vc(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}Vc(Ta,Array.prototype);var Xo=function(e,t,n){Di(r,e);function r(s,i,a,u){var l;return a===void 0&&(a="ObservableArray"),u===void 0&&(u=!1),l=e.call(this)||this,it(function(){var c=new Ho(a,i,u,!0);c.proxy_=Hr(l),Ei(Hr(l),b,c),s&&s.length&&l.spliceWithArray(0,0,s),$c&&Object.defineProperty(Hr(l),"0",Nc)}),l}var o=r.prototype;return o.concat=function(){this[b].atom_.reportObserved();for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return Array.prototype.concat.apply(this.slice(),a.map(function(l){return Q(l)?l.slice():l}))},o[n]=function(){var s=this,i=0;return vn({next:function(){return i<s.length?{value:s[i++],done:!1}:{done:!0,value:void 0}}})},Or(r,[{key:"length",get:function(){return this[b].getArrayLength_()},set:function(i){this[b].setArrayLength_(i)}},{key:t,get:function(){return"Array"}}]),r}(Ta,Symbol.toStringTag,Symbol.iterator);Object.entries(ir).forEach(function(e){var t=e[0],n=e[1];t!=="concat"&&Sn(Xo.prototype,t,n)});function Ca(e){return{enumerable:!1,configurable:!0,get:function(){return this[b].get_(e)},set:function(n){this[b].set_(e,n)}}}function Lc(e){Me(Xo.prototype,""+e,Ca(e))}function Pa(e){if(e>Xr){for(var t=Xr;t<e+100;t++)Lc(t);Xr=e}}Pa(1e3);function Fc(e,t,n){return new Xo(e,t,n)}function We(e,t){if(typeof e=="object"&&e!==null){if(Q(e))return t!==void 0&&A(23),e[b].atom_;if(ee(e))return e.atom_;if(K(e)){if(t===void 0)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||A(25,t,ur(e)),n}if(L(e)){if(!t)return A(26);var r=e[b].values_.get(t);return r||A(27,t,ur(e)),r}if($o(e)||vt(e)||sr(e))return e}else if(ce(e)&&sr(e[b]))return e[b];A(28)}function Ke(e,t){if(e||A(29),t!==void 0)return Ke(We(e,t));if($o(e)||vt(e)||sr(e)||K(e)||ee(e))return e;if(e[b])return e[b];A(24,e)}function ur(e,t){var n;if(t!==void 0)n=We(e,t);else{if(Xt(e))return e.name;L(e)||K(e)||ee(e)?n=Ke(e):n=We(e)}return n.name_}function it(e){var t=Pt(),n=Tr(!0);se();try{return e()}finally{ie(),Cr(n),Be(t)}}var Rs=On.toString;function Yo(e,t,n){return n===void 0&&(n=-1),bo(e,t,n)}function bo(e,t,n,r,o){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var s=typeof e;if(s!=="function"&&s!=="object"&&typeof t!="object")return!1;var i=Rs.call(e);if(i!==Rs.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++;break}e=Ns(e),t=Ns(t);var a=i==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var u=e.constructor,l=t.constructor;if(u!==l&&!(ce(u)&&u instanceof u&&ce(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}if(n===0)return!1;n<0&&(n=-1),r=r||[],o=o||[];for(var c=r.length;c--;)if(r[c]===e)return o[c]===t;if(r.push(e),o.push(t),a){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!bo(e[c],t[c],n-1,r,o))return!1}else{var f=Object.keys(e),d;if(c=f.length,Object.keys(t).length!==c)return!1;for(;c--;)if(d=f[c],!(Fe(t,d)&&bo(e[d],t[d],n-1,r,o)))return!1}return r.pop(),o.pop(),!0}function Ns(e){return Q(e)?e.slice():qt(e)||K(e)||An(e)||ee(e)?Array.from(e.entries()):e}function vn(e){return e[Symbol.iterator]=Bc,e}function Bc(){return this}["Symbol","Map","Set"].forEach(function(e){var t=Ro();typeof t[e]>"u"&&A("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:na,extras:{getDebugName:ur},$mobx:b});const Uc=Object.freeze(Object.defineProperty({__proto__:null,$mobx:b,FlowCancellationError:kr,ObservableMap:qo,ObservableSet:Jo,Reaction:pn,_allowStateChanges:Lo,_allowStateChangesInsideComputed:yo,_allowStateReadsEnd:Nt,_allowStateReadsStart:Pr,_autoAction:Ft,_endAction:Ki,_getAdministration:Ke,_getGlobalState:Vl,_interceptReads:dc,_isComputingDerivation:xl,_resetGlobalState:Ll,_startAction:Wi,action:O,autorun:Uo,comparer:ht,computed:N,configure:ca,createAtom:Xe,defineProperty:_c,entries:va,extendObservable:Wo,flow:mt,flowResult:fc,get:ma,getAtom:We,getDebugName:ur,getDependencyTree:sc,getObserverTree:ic,has:zo,intercept:Yt,isAction:Xt,isBoxedObservable:Fo,isComputed:vc,isComputedProp:mc,isFlow:Ut,isFlowCancellationError:lc,isObservable:Ge,isObservableArray:Q,isObservableMap:K,isObservableObject:L,isObservableProp:yc,isObservableSet:ee,keys:yt,makeAutoObservable:Pc,makeObservable:Cc,observable:E,observe:kt,onBecomeObserved:ua,onBecomeUnobserved:Go,onReactionError:Kl,override:qu,ownKeys:ya,reaction:Bt,remove:Ae,runInAction:yo,set:Ye,spy:na,toJS:_o,trace:wc,transaction:Ie,untracked:Bo,values:Ko,when:Oc},Symbol.toStringTag,{value:"Module"}));var Gc=Object.defineProperty,Wc=(e,t,n)=>t in e?Gc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t,n)=>Wc(e,typeof t!="symbol"?t+"":t,n),ka,$s,Vs,Ls,Fs,Bs,Us,Gs,Ws,Ks;const Kc=new Map;function zc(e,t,n){Kc.set(e,{modelClass:t,fnName:n})}var re;(function(e){e.ApplyPatches="$$applyPatches",e.ApplySnapshot="$$applySnapshot",e.Detach="$$detach",e.ApplySet="$$applySet",e.ApplyDelete="$$applyDelete",e.ApplyMethodCall="$$applyMethodCall"})(re||(re={}));new Set(Object.values(re));var ye;(function(e){e.Sync="sync",e.Async="async"})(ye||(ye={}));var zs;(function(e){e.Spawn="spawn",e.Return="return",e.Resume="resume",e.ResumeError="resumeError",e.Throw="throw"})(zs||(zs={}));let Ia;function Ir(){return Ia}function Hs(e){Ia=e}const Ea=Symbol("modelAction");function Qo(e){return typeof e=="function"&&Ea in e}const T="$modelType",ue="$modelId";function Ma(e){return e===T}class Zo extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Zo.prototype)}}function p(e){return new Zo(e)}const Hc={enumerable:!1,writable:!0,configurable:!1,value:void 0};function ja(e,t,n,r=!0){r?(Object.defineProperty(e,t,Hc),e[t]=n):Object.defineProperty(e,t,{enumerable:!1,writable:r,configurable:!0,value:n})}function De(e){if(!oe(e))return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}function oe(e){return e!==null&&typeof e=="object"}function z(e){switch(typeof e){case"number":case"string":case"boolean":case"undefined":case"bigint":return!0;default:return e===null}}function qc(e,t){const n=e.indexOf(t);return n>=0?(e.splice(n,1),!0):!1}function Er(e){return e instanceof Map||K(e)}function Mr(e){return e instanceof Set||ee(e)}function X(e){return Array.isArray(e)||Q(e)}const Da=!1;function Et(e,t){if(!oe(e))throw p(`${t} must be an object`)}function es(e,t){if(typeof e!="function")throw p(`${t} must be a function`)}function Jc(e,t){if(!z(e))throw p(`${t} must be a primitive`)}const xa=Symbol("runAfterNew"),Xc=Symbol("runBeforeOnInit");function Ra(e,t,n){let r=e[t];(!r||!Object.prototype.hasOwnProperty.call(e,t))&&(r=r?r.slice():[],ja(e,t,r)),r.push(n)}function lr(e,t){const n=e[t];if(n)for(const r of n)r(e)}const qs=new Set;function Na(e,t,n){if(n){if(qs.has(n))return;qs.add(n)}switch(t="[mobx-keystone] "+t,e){case"warn":console.warn(t);break;case"error":console.error(t);break;default:throw p(`unknown log type - ${e}`)}}function he(e){let t,n=!1;return(...r)=>(n||(t=e(...r),n=!0),t)}const Te=e=>e,cr={makeObservable:Uc.makeObservable};function Yc(e){return`set${e[0].toUpperCase()}${e.slice(1)}`}function En(){return cr.makeObservable?6:5}const Mn="mobx-keystone",fr=Symbol("propsType"),Js=Symbol("fromSnapshotOverrideType"),Xs=Symbol("toSnapshotOverrideType"),ts=Symbol("modelInitialized"),Yn={},Z=new WeakMap;function jn(e){return Yn[e]}function Ce(e,t,n){let r=e.get(t);return r===void 0&&(r=n(),e.set(t,r)),r}const go=new WeakMap,$a=new WeakMap;function Qc(e,t){return!e&&!t?!0:!e||!t?!1:e.parent===t.parent&&e.path===t.path}function Zc(){return Xe("parentAtom")}function ef(e){Ce($a,e,Zc).reportObserved()}function Ys(e){var t;(t=$a.get(e))==null||t.reportChanged()}const Qt=new WeakMap;function Gt(e){const t=Qt.get(e);return t??e}function mn(e){return Y(e)?e.$:e}const _t=new WeakMap;function ze(e,t){return!t&&Qt.has(e)?!1:_t.has(e)}function wo(e){return!z(e)&&ze(e,!1)}function $(e,t,n=!1){if(!n&&Qt.has(e))throw p(`${t} must be the model object instance instead of the '$' sub-object`);if(z(e)||!ze(e,!0))throw p(`${t} must be a tree node (usually a model or a shallow / deep child part of a model 'data' object)`)}function tf(e,t="argument"){$(e,t,!1)}let fn=!1;function nf(e){const t=fn;fn=!0;try{yo(()=>{e()})}finally{fn=t}}const Wt=Symbol("modelMetadata"),Qn=Symbol("modelUnwrappedClass"),Oo=Symbol("runAfterModelDecorator"),Va=Symbol("modelProperties");function Zt(e){return e[Va]}function rf(e,t){e[Va]=t}const G=Symbol("noDefaultValue"),ns={_setter:!1,_isId:!0,withSetter(e){const t=Object.create(this);return t._setter=e??!0,t},typedAs(){return ns}},Qs={_defaultFn:G,_defaultValue:G,_typeChecker:void 0,_setter:!1,_isId:!1,_transform:void 0,_fromSnapshotProcessor:void 0,_toSnapshotProcessor:void 0,withSetter(e){const t=Object.create(this);return t._setter=e??!0,t},withTransform(e){const t=Object.create(this);return t._transform=sf(e),t},withSnapshotProcessor({fromSnapshot:e,toSnapshot:t}){let n;if(this._fromSnapshotProcessor&&e){const s=this._fromSnapshotProcessor,i=e;n=a=>s(i(a))}else e?n=e:n=this._fromSnapshotProcessor;let r;if(this._toSnapshotProcessor&&t){const s=this._toSnapshotProcessor,i=t;r=a=>i(s(a))}else t?r=t:r=this._toSnapshotProcessor;const o=Object.create(this);return o._fromSnapshotProcessor=n,o._toSnapshotProcessor=r,o}};function So(e){if(!(arguments.length>=1))return Qs;let n=Zs.get(e);return n||(n=Object.create(Qs),typeof e=="function"?n._defaultFn=e:n._defaultValue=e,Zs.set(e,n)),n}const Zs=new Map;let Ao=!1;const of=()=>{Ao=!0};function sf(e){const t=new WeakMap,n=o=>o.originalValue==null?o.originalValue:e.transform(o),r=o=>o.transformedValue==null?o.transformedValue:e.untransform(o);return{transform(o,s,i,a){const u=Ce(t,s,()=>new Map);let l=u.get(i);(l==null?void 0:l.originalValue)!==o&&(u.delete(i),l=void 0);const c=n({originalValue:o,cachedTransformedValue:l==null?void 0:l.transformedValue,setOriginalValue:a});return u.set(i,{originalValue:o,transformedValue:c}),c},untransform(o,s,i){const a=Ce(t,s,()=>new Map);Ao=!1;const u=r({transformedValue:o,cacheTransformedValue:of});return Ao?a.set(i,{originalValue:u,transformedValue:o}):a.delete(i),u}}}function yn(e){return e._defaultFn!==G?e._defaultFn():e._defaultValue!==G?e._defaultValue:G}let af="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",uf=(e=21)=>{let t="",n=e;for(;n--;)t+=af[Math.random()*64|0];return t};var lt;(function(e){e.DevModeOnly="devModeOnly",e.AlwaysOn="alwaysOn",e.AlwaysOff="alwaysOff"})(lt||(lt={}));let ei=0;const lf=uf();function cf(){const e=ei.toString(36)+"-"+lf;return ei++,e}let dr={modelAutoTypeChecking:lt.DevModeOnly,modelIdGenerator:cf,allowUndefinedArrayElements:!1,showDuplicateModelNameWarnings:!0};function ff(e){dr=Object.freeze({...dr,...e})}function jr(){return dr}function Dn(){switch(jr().modelAutoTypeChecking){case lt.DevModeOnly:return Da;case lt.AlwaysOff:return!1;case lt.AlwaysOn:return!0;default:throw p(`invalid 'modelAutoTypeChecking' config value - ${dr.modelAutoTypeChecking}`)}}const ti=new WeakMap;function en(e){let t=ti.get(e);return t||(t={shallow:new Set,shallowAtom:void 0,deep:new Set,deepDirty:!0,deepAtom:void 0,extensionsData:Ua()},ti.set(e,t)),t}function Dr(e){const t=en(e);return t.shallowAtom||(t.shallowAtom=Xe("shallowChildrenAtom")),t.shallowAtom.reportObserved(),t.shallow}function df(e){const t=en(e);return t.deepDirty&&La(e),t.deepAtom||(t.deepAtom=Xe("deepChildrenAtom")),t.deepAtom.reportObserved(),t}function ni(e,t){t.deep.add(e),rs.forEach((n,r)=>{n.addNode(e,t.extensionsData.get(r))})}const La=O(e=>{var t;const n=en(e);if(!n.deepDirty)return n;n.deep=new Set,n.extensionsData=Ua();const r=n.shallow.values();let o=r.next();for(;!o.done;){ni(o.value,n);const i=La(o.value).deep.values();let a=i.next();for(;!a.done;)ni(a.value,n),a=i.next();o=r.next()}return n.deepDirty=!1,(t=n.deepAtom)==null||t.reportChanged(),n}),hf=O((e,t)=>{var n;const r=en(e);r.shallow.add(t),(n=r.shallowAtom)==null||n.reportChanged(),Fa(e,r)}),pf=O((e,t)=>{var n;const r=en(e);r.shallow.delete(t),(n=r.shallowAtom)==null||n.reportChanged(),Fa(e,r)});function Fa(e,t){var n;let r=e,o=t;for(;r;)o.deepDirty=!0,(n=o.deepAtom)==null||n.reportChanged(),r=gn(r,!1),r&&(o=en(r))}const rs=new Map;function Ba(e){const t={};return rs.set(t,e),n=>n.extensionsData.get(t)}function Ua(){const e=new WeakMap;return rs.forEach((t,n)=>{e.set(n,t.initData())}),e}function vf(){return!!Ir()}function Ga(){if(!vf())throw p("data changes must be performed inside model actions")}const To=[];function Wa(){return!!Ir()}function mf(e){Wa()?To.push(e):e()}let Yr=!1;function yf(){if(!(Wa()||Yr)){Yr=!0;try{for(;To.length>0;)To.shift()()}finally{Yr=!1}}}function bt(e){if(Y(e))return e.constructor[Wt];if(nn(e))return e[Wt];throw p("modelClassOrInstance must be a model class or instance")}const _f=new WeakMap;function gt(e){return Ce(_f,e,()=>bt(e).modelIdProperty)}var wt;(function(e){e.OnInit="$$onInit",e.OnLazyInit="$$onLazyInit",e.OnAttachedToRootStore="$$onAttachedToRootStore",e.OnAttachedToRootStoreDisposer="$$onAttachedToRootStoreDisposer"})(wt||(wt={}));new Set(Object.values(wt));var _n;(function(e){e.ParentFirst="parentFirst",e.ChildrenFirst="childrenFirst"})(_n||(_n={}));function Ka(e,t,n){return $(e,"root"),n===_n.ParentFirst?bf(e,t):za(e,t)}function bf(e,t){const n=[e];for(;n.length>0;){const r=n.pop(),o=t(r);if(o!==void 0)return o;const s=Dr(r);n.length+=s.size;let i=n.length-1;const a=s.values();let u=a.next();for(;!u.done;)n[i--]=u.value,u=a.next()}}function za(e,t){const n=Dr(e).values();let r=n.next();for(;!r.done;){const s=za(r.value,t);if(s!==void 0)return s;r=n.next()}const o=t(e);if(o!==void 0)return o}function Ha(e,t,n){let r=e.get(n);return r||(r=N(()=>wf(n,t,o=>Ha(e,t,o))),e.set(n,r)),r.get()}function gf(e){const t=new WeakMap;return{walk:n=>Ha(t,e,n)}}function wf(e,t,n){let r;const o=t(e),s=Dr(e),i=s.values();let a=i.next();if(o===void 0&&s.size===1)return n(a.value);for(;!a.done;){const u=n(a.value);if(u){r||(r=new Map);const l=u.keys();let c=l.next();for(;!c.done;){const f=c.value,d=u.get(f);r.set(f,d),c=l.next()}}a=i.next()}return o!==void 0&&(r||(r=new Map),r.set(o,e)),r}const Co=new WeakMap,Po=new WeakSet,qa=O("attachToRootStore",(e,t)=>{const n=[];Ka(t,o=>{Po.has(o)||(Po.add(o),o instanceof Ht&&o.onAttachedToRootStore&&(xo(o,"onAttachedToRootStore",wt.OnAttachedToRootStore),n.push(o)))},_n.ParentFirst);const r=n.length;for(let o=0;o<r;o++){const s=n[o],i=s.onAttachedToRootStore(e);i&&Co.set(s,i)}}),Ja=O("detachFromRootStore",e=>{const t=[];Ka(e,r=>{if(!Po.delete(r))return;const o=Co.get(r);if(o){const s=$e({nameOrNameFn:wt.OnAttachedToRootStoreDisposer,fn:o,actionType:ye.Sync}).bind(r);Co.delete(r),t.push(s)}},_n.ChildrenFirst);const n=t.length;for(let r=0;r<n;r++)t[r]()}),Xa=new WeakMap;function Of(){return{atom:void 0,is:!1}}const os=e=>Ce(Xa,e,Of);O("registerRootStore",e=>{var t;$(e,"node");const n=os(e);if(n.is)throw p("object already registered as root store");if(!th(e))throw p("a root store must not have a parent");return n.is=!0,qa(e,e),(t=n.atom)==null||t.reportChanged(),e});O("unregisterRootStore",e=>{var t;if(!Sf(e))throw p("not a root store");const n=os(e);n.is=!1,Ja(e),(t=n.atom)==null||t.reportChanged()});function Sf(e){$(e,"node");const t=os(e);return t.atom||(t.atom=Xe("rootStore")),t.atom.reportObserved(),t.is}function Qr(e){var t;return!!((t=Xa.get(e))!=null&&t.is)}class te{constructor(t,n,r,o){y(this,"path"),y(this,"expectedTypeName"),y(this,"actualValue"),y(this,"typeCheckedValue"),y(this,"message"),this.path=t,this.expectedTypeName=n,this.actualValue=r,this.typeCheckedValue=o;let s=[];this.typeCheckedValue&&ze(this.typeCheckedValue,!0)&&(s=eh(this.typeCheckedValue,!1).path);const i=ze(this.actualValue,!0)?J(this.actualValue):this.actualValue;this.message=`TypeCheckError: [/${[...s,...this.path].join("/")}] Expected a value of type <${this.expectedTypeName}> but got the value <${JSON.stringify(i)}> instead`}throw(){throw p(this.message)}}const Af=[],ko=new WeakMap;var V;(function(e){e.Object="object",e.Array="array",e.Primitive="primitive",e.Any="any"})(V||(V={}));function Tf(e){return X(e)?V.Array:oe(e)?V.Object:z(e)?V.Primitive:V.Any}function Cf(e){let t=e;for(;t;){const n=ko.get(t);n&&(ko.delete(t),n.forEach(r=>{r.invalidateCachedResult(t)})),t=Zd(t,!1)}}const Io=new WeakMap;function Pf(e){const t=Io.get(e);t&&(t.forEach(n=>{n.invalidateSnapshotProcessorCachedResult(e)}),Io.delete(e))}class B{constructor(t,n,r,o,s,i,a){y(this,"baseType"),y(this,"_check"),y(this,"getTypeName"),y(this,"typeInfoGen"),y(this,"snapshotType"),y(this,"_fromSnapshotProcessor"),y(this,"_toSnapshotProcessor"),y(this,"checkResultCache"),y(this,"unchecked"),y(this,"_cachedTypeInfoGen"),y(this,"fromSnapshotProcessor",u=>this._fromSnapshotProcessor(u)),y(this,"_toSnapshotProcessorCache",new WeakMap),y(this,"toSnapshotProcessor",u=>{if(typeof u!="object"||u===null)return this._toSnapshotProcessor(u);if(this._toSnapshotProcessorCache.has(u))return this._toSnapshotProcessorCache.get(u);const l=this._toSnapshotProcessor(u);return this._toSnapshotProcessorCache.set(u,l),Ce(Io,u,()=>new Set).add(this),l}),this.baseType=t,this._check=n,this.getTypeName=r,this.typeInfoGen=o,this.snapshotType=s,this._fromSnapshotProcessor=i,this._toSnapshotProcessor=a,this.unchecked=!n,this._cachedTypeInfoGen=he(o)}createCacheIfNeeded(){return this.checkResultCache||(this.checkResultCache=new WeakMap),this.checkResultCache}setCachedResult(t,n){this.createCacheIfNeeded().set(t,n),Ce(ko,t,()=>new Set).add(this)}invalidateCachedResult(t){var n;(n=this.checkResultCache)==null||n.delete(t)}getCachedResult(t){var n;return(n=this.checkResultCache)==null?void 0:n.get(t)}check(t,n,r){if(this.unchecked)return null;if(!ze(t,!0))return this._check(t,n,r);let o=this.getCachedResult(t);return o===void 0&&(o=this._check(t,Af,void 0),this.setCachedResult(t,o)),o?new te([...n,...o.path],o.expectedTypeName,o.actualValue,r):null}get typeInfo(){return this._cachedTypeInfoGen(this)}invalidateSnapshotProcessorCachedResult(t){this._toSnapshotProcessorCache.delete(t)}}const Ya=Symbol("lateTypeCheker");function fe(e,t){let n;const r=function(){return n||(n=e(),n)};r[Ya]=!0;const o=he(t);return Object.defineProperty(r,"typeInfo",{enumerable:!0,configurable:!1,get(){return o(r)}}),r}function ss(e){return typeof e=="function"&&Ya in e}class H{constructor(t){y(this,"thisType"),this.thisType=t}}const is=new WeakMap,ct=new WeakMap;function _e(e){return is.get(e)}function kf(e,t){if(!t||!e)return;const n=_e(t.parent);if(n)return{parentSnapshot:n,parentPath:t}}const If=O("unsetInternalSnapshot",e=>{var t;const n=_e(e);n&&(is.delete(e),(t=n.atom)==null||t.reportChanged())}),as=O("setNewInternalSnapshot",(e,t,n,r=!1)=>{var o;const s=n?n(t):t,i={untransformed:t,transformFn:n,transformed:s,atom:void 0};ct.set(t,r),s!==void 0&&s!==t&&ct.set(s,r),is.set(e,i),(o=i.atom)==null||o.reportChanged()}),us=O("updateInternalSnapshot",(e,t)=>{var n;const r=_e(e);let o=r.untransformed;ct.get(o)?Array.isArray(o)?o=o.slice():o=Object.assign({},o):Pf(o),t(o),r.untransformed=o,r.transformed=r.transformFn?r.transformFn(o):o,ct.set(r.untransformed,!1),r.transformed!==void 0&&ct.set(r.transformed,!1),(n=r.atom)==null||n.reportChanged();const i=kf(r,Ne(e,!1));if(i){const{parentSnapshot:a,parentPath:u}=i;if(a){const l=u.path;us(u.parent,c=>{c[l]=r.transformed})}}});function Ef(e){e.atom||(e.atom=Xe("snapshot")),e.atom.reportObserved()}function ae(e){if(z(e))return e;const t=ct.get(e);if(t===void 0||t)return e;if(Array.isArray(e))for(let n=0;n<e.length;n++)ae(e[n]);else{const n=Object.keys(e);for(let r=0;r<n.length;r++)ae(e[n[r]])}return ct.set(e,!0),e}const Kn=[];class Qa{constructor(){y(this,"patches",Kn),y(this,"invPatches",Kn)}reset(){this.patches=Kn,this.invPatches=Kn}record(t,n){this.patches=t,this.invPatches=n}emit(t){Za(t,this.patches,this.invPatches),this.reset()}}function Za(e,t,n){(t.length>0||n.length>0)&&(jf(e,t,n),Df(e,t,n))}const Eo=new WeakMap,ri=[];function Mf(e,t){$(e,"subtreeRoot"),es(t,"listener"),Xt(t)||(t=O(t.name||"onPatchesListener",t));let n=Eo.get(e);return n||(n=[],Eo.set(e,n)),n.push(t),()=>{qc(n,t)}}function jf(e,t,n){for(let r=0;r<ri.length;r++){const o=ri[r];o(e,t,n)}}function oi(e,t,n,r){const o=Eo.get(e);if(!o||o.length===0)return;const s=u=>r.length>0?u.map(l=>xf(l,r)):u,i=s(t),a=s(n);for(let u=0;u<o.length;u++){const l=o[u];l(i,a)}}function Df(e,t,n){const r=[];oi(e,t,n,r);let o=Ne(e,!1);for(;o;)r.unshift(o.path),oi(o.parent,t,n,r),o=Ne(o.parent,!1)}function xf(e,t){return{...e,path:[...t,...e.path]}}const si=e=>{if(z(e))return e;const t=_e(e);return t?ae(t.transformed):e};function jt(e,t,n){return n===void 0?{op:"remove",path:e}:t===void 0?{op:"add",path:e,value:si(n)}:{op:"replace",path:e,value:si(n)}}function W(e,t,n){(e[t]!==n||!(t in e))&&Ye(e,t,n)}function Rf(e,t,n){return e[t]!==n||!(t in e)?(Ye(e,t,n),!0):!1}var Kt;(function(e){e[e.Model=0]="Model",e[e.Array=1]="Array",e[e.PlainObject=2]="PlainObject",e[e.Frozen=3]="Frozen"})(Kt||(Kt={}));function Nf(e,t,n=0){const r=$f(e,t,n);return r?r.parent:void 0}function $f(e,t,n=0){$(e,"child");const r=[];let o=e,s=0,i;for(;i=Ne(o,!0);){if(r.unshift(i.path),o=i.parent,t(o))return{parent:o,path:r};if(s++,n>0&&s===n)break}}let Zn=!0;function ls(e){const t=Zn;Zn=!1;try{e()}finally{Zn=t}}function Vf(){return Zn}var Re;(function(e){e[e.Array=0]="Array",e[e.Frozen=1]="Frozen",e[e.Model=2]="Model",e[e.PlainObject=3]="PlainObject"})(Re||(Re={}));function Lf(e,t,n){if(!X(e))return et(t);const r=J(e);return ls(()=>{e.length>t.length&&e.splice(t.length,e.length-t.length);for(let o=0;o<e.length;o++){const s=e[o],i=Le(s,t[o],n,e);fs(i,s,n),W(e,o,i)}for(let o=e.length;o<t.length;o++)e.push(Le(void 0,t[o],n,e))}),xn(e,void 0,r),e}function Ff(){Rr(Re.Array,(e,t,n)=>{if(X(t))return Lf(e,t,n)})}var bn;(function(e){e.DevModeOnly="devModeOnly",e.On="on",e.Off="off"})(bn||(bn={}));const eu="$frozen";class xr{constructor(t,n=bn.DevModeOnly){y(this,"data");const r=n===bn.On||Da;r&&er(t),this.data=t,r&&Object.freeze(this.data),me(this,void 0)}}function tu(e,t=bn.DevModeOnly){return new xr(e,t)}function er(e){if(!z(e)){if(Array.isArray(e)){const t=e.length;for(let n=0;n<t;n++){const r=e[n];if(r===void 0&&!jr().allowUndefinedArrayElements)throw p("undefined is not supported inside arrays since it is not serializable in JSON, consider using null instead");er(r)}Object.freeze(e);return}if(De(e)){const t=Object.keys(e),n=t.length;for(let r=0;r<n;r++){const o=t[r],s=e[o];er(o),er(s)}Object.freeze(e);return}throw p(`frozen data must be plainly serializable to JSON, but ${e} is not`)}}function cs(e){return De(e)&&eu in e}function Bf(e,t){return e instanceof xr&&e.data===t.data?e:tu(t.data)}function Uf(){Rr(Re.Frozen,(e,t)=>{if(cs(t))return Bf(e,t)})}function Gf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wf=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(o of t.entries())if(!n.has(o[0]))return!1;for(o of t.entries())if(!e(o[1],n.get(o[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(o of t.entries())if(!n.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(t[o]!==n[o])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var i=s[o];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n};const Kf=Gf(Wf);function nu(e,t){return e+" "+t}class ru{constructor(t){y(this,"pool");var n;t=(n=Qt.get(t))!=null?n:t,this.pool=zf(df(t))}findModelByTypeAndId(t,n){return n?this.pool.get(nu(t,n)):void 0}findModelForSnapshot(t){if(!Kr(t))return;const n=t[T],r=jn(n),o=gt(r.class);return o?this.findModelByTypeAndId(n,t[o]):void 0}}const zf=Ba({initData(){return new Map},addNode(e,t){if(Y(e)){const n=e[ue];n&&t.set(nu(e[T],n),e)}}});function Mo(e,t){$(e,"node"),Et(t,"snapshot"),Hf().call(e,t)}function ou(e){const t=this,n=()=>{const r=new ru(t);Le(t,e,r,void 0)};if(X(e)){if(!X(t))throw p("if the snapshot is an array the target must be an array too");n();return}if(cs(e))throw p("applySnapshot cannot be used over frozen objects");if(De(e)&&e[T]===void 0&&Y(t)){const r=Z.get(t.constructor);e={...e,[T]:r.name}}if(Kr(e)){const r=e[T],o=jn(r);if(!o)throw p(`model with name "${r}" not found in the registry`);if(!Y(t))throw p("the target for a model snapshot must be a model instance");if(t[T]!==r)throw p(`snapshot model type '${r}' does not match target model type '${t[T]}'`);const s=gt(o.class);if(s){const i=e[s];if(t[ue]!==i)throw p(`snapshot model id '${i}' does not match target model id '${t[ue]}'`)}n();return}if(De(e)){if(!De(t)&&!L(t))throw p("if the snapshot is an object the target must be an object too");n();return}throw Er(e)?p("a snapshot must not contain maps"):Mr(e)?p("a snapshot must not contain sets"):p(`unsupported snapshot - ${e}`)}const Hf=he(()=>$e({nameOrNameFn:re.ApplySnapshot,fn:ou,actionType:ye.Sync}));function qf(e,t){const n=typeof e=="function"?e:()=>e,r=n();$(r,"node");let o=J(r);return Bt(()=>J(n()),s=>{const i=o;o=s,t(s,i)})}function jo(e,t){return e===t?!0:(wo(e)?e=J(e):Ge(e)&&(e=_o(e)),wo(t)?t=J(t):Ge(t)&&(t=_o(t)),Kf(e,t))}En()>=6;function Jf(e,t,n,r){const o=t[T],s=jn(o);if(!s)throw p(`model with name "${o}" not found in the registry`);const i=n.findModelForSnapshot(t);if(i&&(e=i),!Y(e)||e[T]!==o)return et(t);const a=s.class,u=Zt(a),l=gt(a);if(l){const d=t[l];if(e[ue]!==d)return et(t)}else if(X(r)&&!jo(e,t))return et(t);const c=e,f=J(c);return ls(()=>{const d=c.constructor,h=d.fromSnapshotProcessor?d.fromSnapshotProcessor(t):t,m=c.$,_=Object.keys(m),S=_.length;for(let w=0;w<S;w++){const g=_[w];if(!(g in h)){const P=u[g],x=P?yn(P):G;x===G?Ae(m,g):W(m,g,x)}}const C=Object.keys(h),j=C.length;for(let w=0;w<j;w++){const g=C[w];if(!Ma(g)){const P=h[g],x=m[g];let F=Le(x,P,n,c);if(F==null){const at=u[g],Os=at?yn(at):G;Os!==G&&(F=Os)}fs(F,x,n),W(m,g,F)}}}),xn(c,void 0,f),c}function Xf(){Rr(Re.Model,(e,t,n,r)=>{if(Kr(t))return Jf(e,t,n,r)})}function Yf(e,t,n){if(!De(e)&&!L(e))return et(t);const r=e,o=J(r);return ls(()=>{const s=Object.keys(r),i=s.length;for(let l=0;l<i;l++){const c=s[l];c in t||Ae(r,c)}const a=Object.keys(t),u=a.length;for(let l=0;l<u;l++){const c=a[l],f=t[c],d=r[c],h=Le(d,f,n,r);fs(h,d,n),W(r,c,h)}}),xn(r,void 0,o),r}function Qf(){Rr(Re.PlainObject,(e,t,n)=>{if(De(t))return Yf(e,t,n)})}let ii=!1;function Zf(){ii||(ii=!0,Ff(),Uf(),Xf(),Qf())}const hr=[];function Rr(e,t){hr.push({priority:e,reconciler:t}),hr.sort((n,r)=>n.priority-r.priority)}function Le(e,t,n,r){if(z(t))return t;if(J(e)===t)return e;Zf();const o=hr.length;for(let s=0;s<o;s++){const{reconciler:i}=hr[s],a=i(e,t,n,r);if(a!==void 0)return a}throw Er(t)?p("a snapshot must not contain maps"):Mr(t)?p("a snapshot must not contain sets"):p(`unsupported snapshot - ${t}`)}function fs(e,t,n){if(e!==t&&Y(e)&&n.findModelByTypeAndId(e[T],e[ue])){const r=_s(e,!1);r&&Ye(r.parent,r.path,null)}}function zt(e,t,n=!1){$(e,"node"),!(t.length<=0)&&ed().call(e,t,n)}function su(e,t=!1){const n=this,r=new ru(n);if(t){let o=e.length;for(;o--;){const s=e[o];if(!X(s))zn(n,s,r);else{let i=s.length;for(;i--;)zn(n,s[i],r)}}}else{const o=e.length;for(let s=0;s<o;s++){const i=e[s];if(!X(i))zn(n,i,r);else{const a=i.length;for(let u=0;u<a;u++)zn(n,i[u],r)}}}}const ed=he(()=>$e({nameOrNameFn:re.ApplyPatches,fn:su,actionType:ye.Sync}));function zn(e,t,n){const{target:r,prop:o}=td(e,t.path);if(X(r))switch(t.op){case"add":{const s=+o,i=Le(void 0,t.value,n,r);s<0?r.push(i):r.splice(s,0,i);break}case"remove":{const s=+o;r.splice(s,1);break}case"replace":{if(o==="length")r.length=t.value;else{const s=+o,i=Le(r[s],t.value,n,r);W(r,s,i)}break}default:throw p(`unsupported patch operation: ${t.op}`)}else switch(t.op){case"add":{const s=Le(void 0,t.value,n,r);W(r,o,s);break}case"remove":{Ae(r,o);break}case"replace":{const s=Le(r[o],t.value,n,r);W(r,o,s);break}default:throw p(`unsupported patch operation: ${t.op}`)}}function td(e,t){let n=mn(e);if(t.length===0)return{target:n};for(let r=0;r<=t.length-2;r++)n=mn(n[t[r]]);return{target:n,prop:t[t.length-1]}}function xn(e,t,n){if(Vf()&&(Cf(e),Dn())){const r=nd(e);if(r){const o=r.typeCheck();o&&(nf(()=>{t?su.call(e,t.invPatches,!0):n&&ou.call(e,n)}),o.throw())}}}function nd(e){const t=Gt(e);return e!==t&&(e=t,Y(e)&&bt(e).dataType)?e:Nf(e,n=>Y(n)&&!!bt(n).dataType)}function iu(e,t,n){const r=e,o=r.length,s=Q(r)?r:E.array(void 0,dd);s!==r&&(s.length=r.length);let i,a;const u=()=>{i(),a()};_t.set(s,u),He(s,t,!1,!1,!1);const l=[];l.length=o;for(let c=0;c<o;c++){const f=r[c];if(z(f))n||W(s,c,f),l[c]=f;else{const d={parent:s,path:c};let h;n?(h=f,He(h,d,!1,!1,!1)):(h=me(f,d),W(s,c,h));const m=_e(h);l[c]=m.transformed}}return as(s,l,void 0),i=Yt(s,ud.bind(void 0,s)),a=kt(s,sd),s}function rd(e,t,n){n[e]=t}function od(e,t,n,r){r.splice(e,t,...n)}const dn=new Qa;function sd(e){const t=e.object,n=_e(t).untransformed;dn.reset();let r;switch(e.type){case"splice":r=ad(e,n);break;case"update":r=id(e,n);break}xn(t,dn),!fn&&r&&(us(t,r),dn.emit(t))}function id(e,t){const n=e.index,r=e.newValue,o=t[n];let s;z(r)?s=r:s=_e(r).transformed;const i=rd.bind(void 0,n,s),a=[n];return dn.record([{op:"replace",path:a,value:ae(s)}],[{op:"replace",path:a,value:ae(o)}]),i}function ad(e,t){const n=e.index,r=e.addedCount,o=e.removedCount,s=[];s.length=r;for(let c=0;c<r;c++){const f=e.added[c];z(f)?s[c]=f:s[c]=_e(f).transformed}const i=t.length,a=od.bind(void 0,n,o,s),u=[],l=[];if(r===o){const c=[],f=[];let d=0;for(let h=0;h<r;h++){const m=n+h,_=ai(t,m,n,o,s),S=t[m];if(_!==S){const C=[m-d];u.push({op:"remove",path:C}),l.push({op:"remove",path:C}),d++;const j=[m];c.push({op:"add",path:j,value:ae(_)}),f.push({op:"add",path:j,value:ae(S)})}}u.push(...c),l.push(...f),l.reverse()}else{const c=i-o;if(o>0){const f=n>=c;f&&u.push({op:"replace",path:["length"],value:c});for(let d=o-1;d>=0;d--){const h=n+d,m=[h];f||u.push({op:"remove",path:m}),l.push({op:"add",path:m,value:ae(t[h])})}}if(r>0){const f=n>=c;f&&l.push({op:"replace",path:["length"],value:c});for(let d=0;d<r;d++){const h=n+d,m=[h];u.push({op:"add",path:m,value:ae(ai(t,h,n,o,s))}),f||l.push({op:"remove",path:m})}}}return dn.record(u,l),a}function ud(e,t){switch(Ga(),t.type){case"splice":cd(t);break;case"update":ld(t,e);break}return t}function ld(e,t){const n=t[e.index];me(n,void 0),e.newValue=me(e.newValue,{parent:t,path:e.index})}function cd(e){for(let r=0;r<e.removedCount;r++){const o=e.object[e.index+r];me(o,void 0)}for(let r=0;r<e.added.length;r++)e.added[r]=me(e.added[r],{parent:e.object,path:e.index+r});const t=e.index+e.removedCount,n=e.index+e.added.length;if(t!==n)for(let r=t,o=n;r<e.object.length;r++,o++)He(e.object[r],{parent:e.object,path:o},!0,!1,!1)}function fd(){Vr(Kt.Array,(e,t)=>{if(X(e))return iu(e,t,!1)})}const dd={deep:!1};function ai(e,t,n,r,o){const s=t-n;return s<0?e[t]:s<o.length?o[s]:e[t-o.length+r]}function hd(e,t){const n=E.array([],hs),r=e.length;for(let o=0;o<r;o++)n.push($r(e[o],t));return iu(n,void 0,!0)}function pd(){Nr(Re.Array,(e,t)=>{if(X(e))return hd(e,t)})}function vd(){Nr(Re.Frozen,e=>{if(cs(e))return tu(e.data)})}function md(e,t){const n=e[T];if(!n)throw p(`a model snapshot must contain a type key (${T}), but none was found`);const r=jn(n);if(!r)throw p(`model with name "${n}" not found in the registry`);const o=gt(r.class);if(o&&e[o]===void 0)throw p(`a model snapshot of type '${n}' must contain an id key (${o}), but none was found`);return new r.class(void 0,{snapshotInitialData:{unprocessedSnapshot:e,unprocessedModelType:typeof t.untypedSnapshot=="object"&&t.untypedSnapshot&&T in t.untypedSnapshot?t.untypedSnapshot[T]:void 0,snapshotToInitialData:t.snapshotToInitialData},generateNewIds:t.options.generateNewIds})}function yd(){Nr(Re.Model,(e,t)=>{if(Kr(e))return md(e,t)})}function ds(e,t,n,r,o){const s=e,i=L(s)?s:E.object({},void 0,_d);let a,u;const l=()=>{a(),u()};_t.set(i,l),He(i,t,!1,o,!1);const c={},f=Object.keys(s),d=f.length;for(let m=0;m<d;m++){const _=f[m],S=s[_];if(z(S))r||W(i,_,S),c[_]=S;else{const C={parent:i,path:_};let j;r?(j=S,He(j,C,!1,!1,!1)):(j=me(S,C),W(i,_,j));const w=_e(j);c[_]=w.transformed}}let h;if(n){c[T]=n;const m=jn(n);if(!m)throw p(`model with name "${n}" not found in the registry`);const _=m.class.toSnapshotProcessor;_&&(h=S=>_(S,Gt(i)))}return as(o?Gt(i):i,c,h),a=Yt(i,Ad),u=kt(i,wd),i}const _d={deep:!1};function bd(e,t,n){n[e]=t}function gd(e,t){delete t[e]}const $t=new Qa;function wd(e){const t=e.object,n=Gt(t),r=_e(n).untransformed;$t.reset();let o;switch(e.type){case"add":case"update":o=Sd(e,r);break;case"remove":o=Od(e,r);break}xn(t,$t),fn||(us(n,o),$t.emit(n))}function Od(e,t){const n=e.name,r=t[n],o=gd.bind(void 0,n),s=[n];return $t.record([{op:"remove",path:s}],[{op:"add",path:s,value:ae(r)}]),o}function Sd(e,t){const n=e.name,r=e.newValue,o=t[n];let s;z(r)?s=r:s=_e(r).transformed;const i=bd.bind(void 0,n,s),a=[n];return e.type==="add"?$t.record([{op:"add",path:a,value:ae(s)}],[{op:"remove",path:a}]):$t.record([{op:"replace",path:a,value:ae(s)}],[{op:"replace",path:a,value:ae(o)}]),i}function Ad(e){if(Ga(),typeof e.name=="symbol")throw p("symbol properties are not supported");switch(e.type){case"add":e.newValue=me(e.newValue,{parent:e.object,path:String(e.name)});break;case"remove":{me(e.object[e.name],void 0);break}case"update":{const t=e.object[e.name],n=e.newValue;n!==t&&(me(t,void 0),e.newValue=me(n,{parent:e.object,path:String(e.name)}));break}}return e}function Td(){Vr(Kt.PlainObject,(e,t)=>{if(L(e)||De(e))return ds(e,t,void 0,!1,!1)})}function Cd(e,t){const n=E.object({},void 0,hs),r=Object.keys(e),o=r.length;for(let s=0;s<o;s++){const i=r[s],a=e[i];Ye(n,i,$r(a,t))}return ds(n,void 0,void 0,!0,!1)}function Pd(){Nr(Re.PlainObject,(e,t)=>{if(De(e))return Cd(e,t)})}let ui=!1;function kd(){ui||(ui=!0,pd(),vd(),yd(),Pd())}const pr=[];function Nr(e,t){pr.push({priority:e,snapshotter:t}),pr.sort((n,r)=>n.priority-r.priority)}function et(e,t,n){let r,o,s;if(ss(e)||e instanceof B||nn(e)){const i=R(e);o=t,r=i.fromSnapshotProcessor(o),s=n}else r=e,o=r,s=t;return Id(r,o,s)}const Id=O("fromSnapshot",(e,t,n)=>{const o={options:{generateNewIds:!1,overrideRootModelId:void 0,...n},untypedSnapshot:t};return o.snapshotToInitialData=Ed.bind(void 0,o),$r(e,o)});function $r(e,t){if(z(e))return e;kd();const n=pr.length;for(let r=0;r<n;r++){const{snapshotter:o}=pr[r],s=o(e,t);if(s!==void 0)return s}throw Er(e)?p("a snapshot must not contain maps"):Mr(e)?p("a snapshot must not contain sets"):p(`unsupported snapshot - ${e}`)}function Ed(e,t){const n=E.object({},void 0,hs),r=Object.keys(t),o=r.length;for(let s=0;s<o;s++){const i=r[s];if(!Ma(i)){const a=t[i];Ye(n,i,$r(a,e))}}return n}const hs={deep:!1};function Md(e,t){$(e,"node");const n={generateNewIds:!0,...t},r=J(e);return et(r,n)}const He=O("setParent",(e,t,n,r,o)=>{if(z(e))return e;let s=Ne(e,!1);if(Qc(s,t))return e;if(Qr(e))throw p("root stores cannot be attached to any parents");if(r)return Qt.set(e,t.parent),e;if(t){const c=Gt(t.parent);t.parent!==c&&(t={parent:c,path:t.path})}if(o&&(t!=null&&t.parent)&&(s!=null&&s.parent)&&Y(e)&&bt(e).valueType&&(e=Md(e,{generateNewIds:!0}),s=Ne(e,!1)),s&&t){if(s.parent===t.parent&&n)return go.set(e,t),Ys(e),e;throw p("an object cannot be assigned a new parent when it already has one")}const i=t?void 0:$d(e),a=e instanceof Ht;let u,l;if(a&&(u=yr(e,!1),l=Qr(u)?u:void 0),s!=null&&s.parent&&pf(s.parent,e),go.set(e,t),t!=null&&t.parent&&hf(t.parent,e),Ys(e),a){const c=yr(e,!1),f=Qr(c)?c:void 0;l!==f&&(l||f)&&mf(()=>{l&&Ja(e),f&&qa(f,e)})}return i==null||i(),e});function ps(e,t){const n=R(e);return n.unchecked?null:n.check(t,[],t)}function jd(e,t){return _t.set(e,void 0),He(e,t,!1,!1,!1),as(e,{[eu]:!0,data:e.data},void 0,!0),e}function Dd(){Vr(Kt.Frozen,(e,t)=>{if(e instanceof xr)return jd(e,t)})}function au(e,t){return _t.set(e,void 0),He(e,t,!1,!1,!0),e}function xd(){Vr(Kt.Model,(e,t)=>{if(Y(e))return au(e,t)})}let li=!1;function Rd(){li||(li=!0,fd(),Dd(),xd(),Td())}function vs(e,t){let n,r,o;if(arguments.length===1?(o=!1,n=e):(r=e,o=!0,n=t),!oe(n))throw p("only objects can be turned into tree nodes");if(o&&Dn()){const s=ps(r,n);s&&s.throw()}return ze(n,!0)?n:me(n,void 0)}const vr=[];function Vr(e,t){vr.push({priority:e,tweaker:t}),vr.sort((n,r)=>n.priority-r.priority)}function Nd(e,t){if(z(e))return e;if(ze(e,!0))return e=He(e,t,!1,!1,!0),e;if(ms(e))throw p("data models are not directly supported. you may insert the data in the tree instead ('$' property).");Rd();const n=vr.length;for(let r=0;r<n;r++){const{tweaker:o}=vr[r],s=o(e,t);if(s!==void 0)return s}throw Er(e)?p("maps are not directly supported. consider using 'ObjectMap' / 'asMap' instead."):Mr(e)?p("sets are not directly supported. consider using 'ArraySet' / 'asSet' instead."):p(`tweak can only work over models, observable objects/arrays, or primitives, but got ${e} instead`)}const me=O("tweak",Nd);function $d(e){if(z(e))return;const t=_t.get(e);if(!t)return;const n=Array.from(Dr(e).values());for(let r=0;r<n.length;r++)He(n[r],void 0,!1,!1,!1);return()=>{t(),_t.delete(e),If(e)}}const Do=Symbol("modelInitializers");function Vd(e){return e[Do]}function uu(e,t){const n=Vd(e);if(n){const r=n.length;for(let o=0;o<r;o++)n[o](t)}}const Ld=O("newModel",(e,t,n)=>{const{modelClass:r}=n,o=r,s=e;if(!Z.get(o))throw p(`no model info for class ${o.name} could be found - did you forget to add the @model decorator?`);if(s.$=t,uu(o,s),Dn()&&lu(o).dataType){const a=s.typeCheck();a&&a.throw()}return s}),Fd=new WeakMap;ka=fr;class mr{constructor(t){if(y(this,ka),y(this,"$"),!oe(t))throw p("data models can only work over data objects");const{modelClass:n}=arguments[1],r=n;let o;if(wo(t))o=t;else{if(!Z.get(r))throw p(`no model info for class ${r.name} could be found - did you forget to add the @model decorator?`);const l=Zt(r),c=Object.assign({},t),f=Object.keys(l);for(let d=0;d<f.length;d++){const h=f[d],m=l[h];let _=c[h],S=!1;m._transform&&(S=!0,_=m._transform.untransform(_,this,h)),_==null&&(m._defaultFn!==G?(S=!0,_=m._defaultFn()):m._defaultValue!==G&&(S=!0,_=m._defaultValue)),S&&(c[h]=_)}o=vs(c)}const s=Ce(Fd,r,()=>new WeakMap),i=s.get(o);if(i)return i;s.set(o,this),Object.setPrototypeOf(this,r.prototype);const a=this;delete a[fr],Ld(this,o,{modelClass:r})}typeCheck(){const t=Lr(this.constructor);return ps(t,this.$)}toString(t){const n={withData:!0,...t},r=Z.get(this.constructor),o=`${this.constructor.name}#${r.name}`;return n.withData?`[${o} ${JSON.stringify(J(this))}]`:`[${o}]`}}const Bd=new Set(["onLazyInit","$","typeCheck"]);function ms(e){return e instanceof mr}function Ot(e){return!(typeof e!="function"||e!==mr&&!(e.prototype instanceof mr))}function lu(e){if(ms(e))return e.constructor[Wt];if(Ot(e))return e[Wt];throw p("modelClassOrInstance must be a model class or instance")}function be(e){const n=ge(e).typeInfo;if(!n)throw p(`type info not found for ${e}`);return n}const ci=new WeakMap;function Lr(e){if(!Ot(e)&&typeof e=="function"){const t=e;return fe(()=>Lr(t()),r=>new fi(r,t()))}else{const t=e,n=ci.get(t);if(n)return n;const r=s=>new fi(s,t),o=fe(()=>{const s=Z.get(t),i=`DataModelData(${s.name})`,a=lu(t).dataType;if(!a)throw p(`type checking cannot be performed over data model data of type '${s.name}' since that model type has no data type declared, consider adding a data type or using types.unchecked() instead`);const u=R(a),l=new B(V.Object,(c,f,d)=>u.check(c,f,d),()=>i,r,c=>u.snapshotType(c)?l:null,c=>u.fromSnapshotProcessor(c),c=>u.toSnapshotProcessor(c));return l},r);return ci.set(t,o),o}}class fi extends H{constructor(t,n){super(t),y(this,"modelClass"),y(this,"_props",he(()=>{const r=Zt(this.modelClass),o={};return Object.keys(r).forEach(s=>{const i=r[s],a=i._typeChecker;let u;a&&(u=be(a));let l=!1,c;i._defaultFn!==G?(c=i._defaultFn,l=!0):i._defaultValue!==G&&(c=i._defaultValue,l=!0),o[s]={type:a,typeInfo:u,hasDefault:l,default:c}}),o})),this.modelClass=n}get props(){return this._props()}get modelType(){return Z.get(this.modelClass).name}}function Ud(){ys(e=>Ot(e)?Lr(e):void 0)}const di=new WeakMap;function Fr(e){if(!nn(e)&&typeof e=="function"){const t=e;return fe(()=>Fr(t()),r=>new hi(r,t()))}else{const t=e,n=di.get(t);if(n)return n;const r=s=>new hi(s,t),o=fe(()=>{const s=Z.get(t),i=`Model(${s.name})`,a=bt(t).dataType,u=a?R(a):void 0,l=new B(V.Object,(c,f,d)=>c instanceof t?u?u.check(c.$,f,d):null:new te(f,i,c,d),()=>i,r,c=>oe(c)?c[T]!==void 0?c[T]===s.name?l:null:u&&u.snapshotType(c)?l:null:null,c=>c[T]?c:{...c,[T]:s.name},c=>c);return l},r);return di.set(t,o),o}}class hi extends H{constructor(t,n){super(t),y(this,"modelClass"),y(this,"_props",he(()=>{const r=Zt(this.modelClass),o={};return Object.keys(r).forEach(s=>{const i=r[s],a=i._typeChecker;let u;a&&(u=be(a));let l=!1,c;i._defaultFn!==G?(c=i._defaultFn,l=!0):i._defaultValue!==G&&(c=i._defaultValue,l=!0),o[s]={type:a,typeInfo:u,hasDefault:l,default:c}}),o})),this.modelClass=n}get props(){return this._props()}get modelType(){return Z.get(this.modelClass).name}}function Gd(){ys(e=>nn(e)?Fr(e):void 0)}const tn=[];function Br(e){Jc(e,"literal");let t;switch(e){case void 0:t="undefined";break;case null:t="null";break;default:t=JSON.stringify(e);break}const n=o=>new Wd(o,e),r=new B(V.Primitive,(o,s,i)=>o===e?null:new te(s,t,o,i),()=>t,n,o=>o===e?r:null,Te,Te);return r}class Wd extends H{constructor(t,n){super(t),y(this,"literal"),this.literal=n}}const Ur=Br(void 0);tn.push(e=>e===void 0?Ur:void 0);const Gr=Br(null);tn.push(e=>e===null?Gr:void 0);const Wr=new B(V.Primitive,(e,t,n)=>typeof e=="boolean"?null:new te(t,"boolean",e,n),()=>"boolean",e=>new Kd(e),e=>typeof e=="boolean"?Wr:null,Te,Te);tn.push(e=>e===Boolean?Wr:void 0);class Kd extends H{}const Rn=new B(V.Primitive,(e,t,n)=>typeof e=="number"?null:new te(t,"number",e,n),()=>"number",e=>new zd(e),e=>typeof e=="number"?Rn:null,Te,Te);tn.push(e=>e===Number?Rn:void 0);class zd extends H{}const qe=new B(V.Primitive,(e,t,n)=>typeof e=="string"?null:new te(t,"string",e,n),()=>"string",e=>new Hd(e),e=>typeof e=="string"?qe:null,Te,Te);tn.push(e=>e===String?qe:void 0);class Hd extends H{}function qd(){tn.forEach(e=>{ys(e)})}let pi=!1;function Jd(){pi||(pi=!0,Gd(),Ud(),qd())}const cu=[];function ys(e){cu.push(e)}function fu(e){Jd();for(const t of cu){const n=t(e);if(n)return n}}function R(e){let t=e;for(;;){if(t instanceof B)return t;if(ss(t))t=t();else{const n=fu(e);if(n)return R(n);throw p("type checker could not be resolved")}}}function du(e){if(e instanceof B||ss(e))return e;{const t=fu(e);return t||void 0}}function ge(e){const t=du(e);if(t)return t;throw p("standard type could not be resolved")}function J(e,t){let n=Te,r;if(arguments.length>=2?(n=R(e).toSnapshotProcessor,r=t):r=e,z(r))return n(r);$(r,"nodeOrPrimitive");const o=_e(r);if(!o)throw p("getSnapshot is not supported for this kind of object");return ae(o.transformed),Ef(o),n(o.transformed)}const Xd=O("newModel",(e,t,n)=>{const{modelInfo:r,modelIdPropertyName:o,modelProps:s,modelIdPropData:i}=hu(n);if(o&&i){let l;t[o]?l=t[o]:l=i._defaultFn(),W(t,o,l)}const a=e;a[T]=r.name;const u=Object.keys(s);for(let l=0;l<u.length;l++){const c=u[l];if(c===o)continue;const f=s[c];let h=t[c],m=!1;if(f._transform&&(m=!0,h=f._transform.untransform(h,a,c)),h==null){const _=yn(f);_!==G?(m=!0,h=_):c in t||(m=!0)}m&&Ye(t,c,h)}if(pu(a,t,n),Dn()&&bt(n).dataType){const l=a.typeCheck();l&&l.throw()}}),Yd=O("fromSnapshotModel",(e,t,n,r)=>{const{modelInfo:o,modelIdPropertyName:s,modelProps:i,modelIdPropData:a}=hu(n);let u,l=t.unprocessedSnapshot;a&&s&&(r?u=a._defaultFn():u=l[s]),n.fromSnapshotProcessor&&(l=n.fromSnapshotProcessor(l));const c=t.snapshotToInitialData(l),f=e;f[T]=o.name;const d=[],h=[];if(s){const C=c[s];if(Rf(c,s,u)){const w=[s];d.push(jt(w,C,u)),h.push(jt(w,u,C))}}const m=Object.keys(i);for(let C=0;C<m.length;C++){const j=m[C];if(j===s)continue;const w=i[j],g=c[j];let P=g,x=!1;if(P==null){const F=yn(w);F!==G?(x=!0,P=F):j in c||(x=!0)}if(x&&(Ye(c,j,P),P!==g)){const F=[j];d.push(jt(F,g,P)),h.push(jt(F,P,g))}}const _=t==null?void 0:t.unprocessedModelType,S=o.name;if(_!==S){const C=[T];d.push(jt(C,_,S)),h.push(jt(C,S,_))}if(pu(f,c,n),Za(f,d,h),Dn()&&bt(n).dataType){const C=f.typeCheck();C&&C.throw()}});function hu(e){const t=Z.get(e);if(!t)throw p(`no model info for class ${e.name} could be found - did you forget to add the @model decorator?`);const n=gt(e),r=Zt(e),o=n?r[n]:void 0;return{modelInfo:t,modelIdPropertyName:n,modelProps:r,modelIdPropData:o}}function pu(e,t,n){au(e,void 0),e.$=ds(t,{parent:e,path:"$"},e[T],!1,!0),uu(n,e)}const vi=Symbol("modelIdPropertyName");class Ht{constructor(t){y(this,Bs),y(this,Fs),y(this,Ls),y(this,Vs),y(this,$s),y(this,"$");const n=t,{snapshotInitialData:r,modelClass:o,generateNewIds:s}=arguments[1];Object.setPrototypeOf(this,o.prototype);const i=this;delete i[fr],delete i[Js],delete i[Xs],delete i[vi],r?Yd(this,r,o,!!s):(Et(n,"initialData"),Xd(this,E.object(n,void 0,{deep:!1}),o))}get[(Bs=fr,Fs=Js,Ls=Xs,Vs=vi,$s=T,ue)](){const t=gt(this.constructor);return t?this.$[t]:void 0}set[ue](t){const n=gt(this.constructor);if(!n)throw p("$modelId cannot be set when there is no idProp set in the model");this.$[n]=t}getRefId(){return this[ue]}typeCheck(){const t=Fr(this.constructor);return ps(t,this)}toString(t){const n={withData:!0,...t},r=`${this.constructor.name}#${this[T]}`;return n.withData?`[${r} ${JSON.stringify(J(this))}]`:`[${r}]`}}const Qd=new Set([T,ue,"onInit","$","getRefId","onAttachedToRootStore","typeCheck"]);function Y(e){return e instanceof Ht}function nn(e){return!(typeof e!="function"||e!==Ht&&!(e.prototype instanceof Ht))}function Kr(e){return De(e)&&T in e}function Ne(e,t){return t&&ef(e),go.get(e)}function _s(e,t){const n=Qt.get(e);if(n)return{parent:n,path:"$"};const r=Ne(e,t);return r&&Y(r.parent)?{parent:r.parent.$,path:r.path}:r}function gn(e,t){var n;return(n=Ne(e,t))==null?void 0:n.parent}function Zd(e,t){var n;return(n=_s(e,t))==null?void 0:n.parent}function eh(e,t){let n=e;const r=[],o=[e];let s;for(;s=Ne(n,t);)n=s.parent,r.unshift(s.path),o.unshift(s.parent);return{root:n,path:r,pathObjects:o}}function yr(e,t){let n=e,r;for(;r=Ne(n,t);)n=r.parent;return n}function th(e){return $(e,"value"),!gn(e,!0)}const Zr={resolved:!1};function eo(e,t){let n=e;const r=t.length;for(let o=0;o<r;o++){if(!oe(n))return Zr;const s=t[o];if(X(n)&&+s>=n.length)return Zr;if(Y(n)){const i=mn(n);if(s in i)n=i;else if(!(s in n))return Zr}n=n[s]}return{resolved:!0,value:n}}const vu=Symbol("skipIdChecking");function to(e,t,n){var r;let o=mn(e);const s=t.length;for(let i=0;i<s;i++){if(!oe(o))return{resolved:!1};const a=t[i];if(X(o)&&+a>=o.length)return{resolved:!1};const u=o[a];o=mn(u);const l=n[i];if(l!==vu){const c=Y(u)&&(r=u[ue])!=null?r:null;if(l!==c)return{resolved:!1}}}return{resolved:!0,value:Gt(o)}}const nh=new WeakMap;function rh(e){const t=[];let n=e;for(;n;){const r=nh.get(n);r&&r.length>0&&t.push(r),n=gn(n,!1)}return t}function $e({nameOrNameFn:e,fn:t,actionType:n,overrideContext:r,isFlowFinisher:o=!1}){let s=!1;const i=function(...a){const u=typeof e=="function"?e():e;s||(s=!0,t=O(u,t));const l=Ir(),c={actionName:u,type:n,target:this,args:a,parentContext:l,data:{},rootContext:void 0};r&&r(c,this),c.rootContext||(c.previousAsyncStepContext?c.rootContext=c.previousAsyncStepContext.rootContext:c.parentContext?c.rootContext=c.parentContext.rootContext:c.rootContext=c),Hs(c);const f=rh(c.target);let d=f.length-1,h=0;const m=()=>{const _=f[d];if(!_)return t.apply(this,a);const S=_[h];return h++,h>=_.length&&(h=0,d--),(S.filter?S.filter(c):!0)?S.middleware(c,m):m()};try{const _=m();if(o){const S=_,C=S.value;return S.resolution==="accept"?S.accepter(C):S.rejecter(C),C}else return _}finally{Hs(c.parentContext),yf()}};return i[Ea]=!0,i}function xo(e,t,n){const r=e[t];if(Qo(r))return;const o=$e({nameOrNameFn:n,fn:r,actionType:ye.Sync}),s=Object.getPrototypeOf(e);s[t]===r?s[t]=o:e[t]=o}function oh(e){$(e,"node"),sh().call(e)}const sh=he(()=>$e({nameOrNameFn:re.Detach,fn:ih,actionType:ye.Sync}));function ih(){const t=_s(this,!1);if(!t)return;const{parent:n,path:r}=t;if(Q(n))n.splice(+r,1);else if(L(n))Ae(n,String(r));else throw p("parent must be an observable object or an observable array")}const no=Symbol("unboundMethod"),mi=(e,t)=>{const n=no in e?e[no]:e,r=n.bind(t);return Object.getOwnPropertySymbols(n).forEach(o=>{r[o]=n[o]}),r[no]=n,r};function ah(e,t,n){if(typeof t[1]!="object"){const r=t[0],o=t[1],s=t[2],i=ro(r,o,!0),a=()=>{Ra(r,xa,u=>{const l=n(i,u[o]);u[o]=mi(l,u)})};if(s){if(s.get!==void 0)throw p(`@${e} cannot be used with getters`);if(s.value)return{enumerable:!1,writable:!0,configurable:!0,value:n(i,s.value)};a()}else a()}else{const r=t[1];switch(r.name,r.static,r.kind){case"method":{const o=t[0],s=r.name;let i=!1;r.addInitializer(function(){if(i)return;i=!0;const a=this;let u=this,l=Object.getPrototypeOf(u);for(;l&&l[s]===o;)u=l,l=Object.getPrototypeOf(u);u[s]=n(ro(a,s,!1),u[s])});break}case"field":{const o=r.name;let s;return function(i){const a=this;s||(s=ro(a,o,!1));const u=n(s,i);return mi(u,a)}}default:throw p(`@${e} can only be used on fields or methods}`)}}}const uh=(e,t)=>{e.target=t.$};function ro(e,t,n){if(Ot(e)||ms(e)){const r=Ot(e)?e:e.constructor;let o;const s=i=>{const a=Z.get(i);o=`fn::${a.name}::${t}`,zc(o,a.class,t)};return n?Ra(r,Oo,s):s(r),{actionName:()=>o,overrideContext:uh}}else return{actionName:t,overrideContext:void 0}}const lh=Symbol("modelFlow");function ch(e){return typeof e=="function"&&lh in e}const yi=new Map;function fh(e,t,n){if(es(t,e),yi.has(e)&&Na("warn",`an standalone action with name "${e}" already exists (if you are using hot-reloading you may safely ignore this warning)`,`duplicateActionName - ${e}`),Qo(t))throw p("the standalone action must not be previously marked as an action");if(ch(t))throw p("the standalone action must not be previously marked as a flow action");const r=$e({nameOrNameFn:e,fn:t,actionType:ye.Sync}),o=(s,...i)=>(tf(s,"target"),r.call(s,s,...i));return yi.set(e,o),o}function dh(e,t){$(e,"node",!0),ph().call(e,t)}function hh(e){Ae(this,String(e))}const ph=he(()=>$e({nameOrNameFn:re.ApplyDelete,fn:hh,actionType:ye.Sync}));function vh(e,t,...n){return $(e,"node"),yh().call(e,t,n)}function mh(e,t){return this[e](...t)}const yh=he(()=>$e({nameOrNameFn:re.ApplyMethodCall,fn:mh,actionType:ye.Sync}));function bs(e,t,n){$(e,"node",!0),bh().call(e,t,n)}function _h(e,t){!Y(this)&&Ge(this)?W(this,e,t):this[e]=t}const bh=he(()=>$e({nameOrNameFn:re.ApplySet,fn:_h,actionType:ye.Sync}));re.ApplySnapshot+"",re.ApplyPatches+"",re.Detach+"",re.ApplySet+"",re.ApplyDelete+"",re.ApplyMethodCall+"";function q(...e){return ah("modelAction",e,(t,n)=>{if(Qo(n))return n;if(typeof n!="function")throw p("modelAction has to be used over functions");return $e({nameOrNameFn:t.actionName,fn:n,actionType:ye.Sync,overrideContext:t.overrideContext})})}function gh(e,t){var n;const r=[];let o=e;for(let s=0;s<t.length;s++){o=o[t[s]];const i=Y(o)&&(n=o[ue])!=null?n:null;r.push(i)}return r}var _i;(function(e){e.Return="return",e.Throw="throw"})(_i||(_i={}));function k(e,t,n,r){var o=arguments.length,s=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function mu(e,t,n){return es(e,"objFn"),fe(()=>{const r=e();Et(r,"objectSchema");const o=Object.entries(r),s=(...u)=>{const l=[];for(const[c,f]of o){const d=R(f);let h="...";u.includes(d)||(h=d.getTypeName(...u,d)),l.push(`${c}: ${h};`)}return`{ ${l.join(" ")} }`},i=(u,l)=>{const c={},f=Object.keys(u);for(let d=0;d<f.length;d++){const h=f[d],m=r[h];if(m){const _=R(m);c[h]=l==="from"?_.fromSnapshotProcessor(u[h]):_.toSnapshotProcessor(u[h])}else c[h]=u[h]}return c},a=new B(V.Object,(u,l,c)=>{if(!oe(u)||t&&!(u instanceof xr))return new te(l,s(a),u,c);for(const[f,d]of o){const h=R(d),m=u[f],_=h.check(m,[...l,f],c);if(_)return _}return null},s,n,u=>{if(!oe(u))return null;for(const[l,c]of o){const f=R(c),d=u[l];if(!f.snapshotType(d))return null}return a},u=>i(u,"from"),u=>i(u,"to"));return a},n)}function Nn(e){return mu(e,!1,n=>new wh(n,e))}class wh extends H{constructor(t,n){super(t),y(this,"_objTypeFn"),y(this,"_props",he(()=>{const r=this._objTypeFn(),o={};return Object.keys(r).forEach(s=>{const i=ge(r[s]);o[s]={type:i,typeInfo:be(i)}}),o})),this._objTypeFn=n}get props(){return this._props()}}function Oh(e){return mu(()=>({data:e}),!0,t=>new Sh(t,ge(e)))}class Sh extends H{constructor(t,n){super(t),y(this,"dataType"),this.dataType=n}get dataTypeInfo(){return be(this.dataType)}}const yu=new B(V.Any,null,()=>"any",e=>new Ah(e),()=>yu,Te,Te);function St(){return yu}class Ah extends H{}function $n(e,...t){const n=t.slice();let r;const o=du(e);if(o)n.unshift(o);else{const i=e;r=a=>{const u=i(a);return R(u)}}if(n.length<=0)throw p("or type must have at least 1 possible type");const s=i=>new Th(i,n.map(ge));return fe(()=>{const i=n.map(R);if(i.some(c=>c.unchecked))return St();const a=(...c)=>i.map(d=>c.includes(d)?"...":d.getTypeName(...c,d)).join(" | ");let u;i.some(c=>c.baseType!==i[0].baseType)?u=V.Any:u=i[0].baseType;const l=new B(u,(c,f,d)=>i.some(m=>!m.check(c,f,d))?null:new te(f,a(l),c,d),a,s,c=>{const f=Tf(c),d=i.filter(h=>h.baseType===f||h.baseType===V.Any);if(d.length===1&&d[0].baseType===f)return d[0];for(let h=0;h<d.length;h++){const m=d[h].snapshotType(c);if(m)return m}return null},c=>{const f=r?r(c):l.snapshotType(c);if(!f)throw p(`snapshot '${JSON.stringify(c)}' does not match the following type: ${a(l)}`);return f.fromSnapshotProcessor(c)},c=>{const f=r?r(c):l.snapshotType(c);if(!f)throw p(`snapshot '${JSON.stringify(c)}' does not match the following type: ${a(l)}`);return f.toSnapshotProcessor(c)});return l},s)}class Th extends H{constructor(t,n){super(t),y(this,"orTypes"),y(this,"_orTypeInfos",he(()=>this.orTypes.map(be))),this.orTypes=n}get orTypeInfos(){return this._orTypeInfos()}}const Ch=Symbol("noDefaultValue"),bi=new WeakMap;function Ph(e,t,n){let r=bi.get(e);r||(r=new Map,bi.set(e,r));let o=r.get(t);return o||(o=n(),r.set(t,o)),o}function le(e,t){switch(typeof e){case"string":return le(qe,e);case"number":return le(Rn,e);case"boolean":return le(Wr,e)}const n=arguments.length>=2,r=ge(e);return Ph(r,n?t:Ch,()=>{const o=n?$n(r,Ur,Gr):r,s=Object.create(n?So(t):So());return Object.assign(s,{_typeChecker:r,_fromSnapshotProcessor:kh.bind(void 0,o),_toSnapshotProcessor:Ih.bind(void 0,r)}),s})}function kh(e,t){const n=R(e).fromSnapshotProcessor;return n?n(t):t}function Ih(e,t){const n=R(e).toSnapshotProcessor;return n?n(t):t}function gi(...e){const t=e.filter(r=>!!r);return t.length<=0?void 0:(r,...o)=>{let s=r;for(let i=0;i<t.length;i++)s=t[i](s,...o);return s}}function wi(e,t,n="must be a class or data model class"){if(!nn(e)&&!Ot(e))throw p(`${t} ${n}`)}function Eh(e,t){var n;const r=(n=e._transform)==null?void 0:n.transform;if(!r)return function(){return this.$[t]};const o=(s,i)=>r(i,s,t,a=>{bs(s.$,t,a)});return function(){const s=this.$[t];return o(this,s)}}const _u=(e,t,n,r)=>{if(e._setter==="assign"&&!Ir()){bs(n,t,r);return}let o=e._transform?e._transform.untransform(r,n,t):r;if(o==null){const s=yn(e);s!==G&&(o=s)}n.$[t]=o},Mh=(e,t,n,r)=>n[ts]?(_u(e,t,n,r),!0):!1,bu=()=>jr().modelIdGenerator(),gu=le(qe,bu);gu._isId=!0;const wu=So(bu);wu._isId=!0;function jh({modelProps:e,baseModel:t,type:n,valueType:r,fromSnapshotProcessor:o,toSnapshotProcessor:s}){if(Et(e,"modelProps"),e=Object.assign(Object.create(null),e),t){wi(t,"baseModel");const w=t[Qn];w&&(t=w,wi(t,"baseModel"))}const i=e;if(t){const w=Zt(t);for(const g of Object.keys(w))e[g]||(i[g]=w[g])}const a=Object.keys(i).filter(w=>i[w]._isId);if(n==="class"){if(a.length>1)throw p(`expected at most one idProp but got many: ${JSON.stringify(a)}`)}else if(a.length>=1)throw p(`expected no idProp but got some: ${JSON.stringify(a)}`);const u=Object.values(i).some(w=>!!w._typeChecker);let l;if(a.length>=1){l=a[0];const w=i[l];let g=u?gu:wu;switch(w._setter){case!0:g=g.withSetter();break;case"assign":g=g.withSetter("assign");break}i[l]=g}let c;if(u){const w={};for(const[g,P]of Object.entries(i))w[g]=P._typeChecker?P._typeChecker:St();c=Nn(()=>w)}const f=t??(n==="class"?Ht:mr),d=n==="class"?Qd:Bd;let h;function m(w,g){var P;const x=(P=g==null?void 0:g.modelClass)!=null?P:this.constructor,F=new f(w,{...g,modelClass:x});return ja(F,ts,!1,!0),h||(h=Object.keys(e).filter(at=>!d.has(at)&&Object.hasOwn(F,at))),h.forEach(at=>{delete F[at]}),F}Object.assign(m,f);const _=f[Do];if(_&&(m[Do]=_.slice()),rf(m,i),n==="class"){const w={dataType:c,modelIdProperty:l,valueType:r};m[Wt]=w}else{const w={dataType:c};m[Wt]=w}m.prototype=Object.create(f.prototype),m.prototype.constructor=m;let S=(w,g,P,x)=>{Mh(w,g,P,x)&&(S=_u)};for(const[w,g]of Object.entries(e)){if(!d.has(w)){const P=Eh(g,w);Object.defineProperty(m.prototype,w,{get:P,set(x){S(g,w,this,x)},enumerable:!0,configurable:!1})}if(g._setter===!0){const P=Yc(w);if(!d.has(P)){const x=q(m.prototype,P,{value:function(F){this[w]=F},writable:!0,enumerable:!1,configurable:!1});Object.defineProperty(m.prototype,P,x)}}}const C=Dh(i),j=xh(i);if(o){const w=o;o=g=>({...w(g),[T]:g[T]})}if(s){const w=s;s=(g,P)=>({...w(g,P),[T]:g[T]})}return m.fromSnapshotProcessor=gi(o,C),m.toSnapshotProcessor=gi(j,s),m}function Dh(e){const t=Object.entries(e).filter(([n,r])=>r._fromSnapshotProcessor);if(!(t.length<=0))return n=>{const r={...n};for(const[o,s]of t)s._fromSnapshotProcessor&&(r[o]=s._fromSnapshotProcessor(n[o]));return r}}function xh(e){const t=Object.entries(e).filter(([n,r])=>r._toSnapshotProcessor);if(!(t.length<=0))return n=>{const r={...n};for(const[o,s]of t)s._toSnapshotProcessor&&(r[o]=s._toSnapshotProcessor(n[o]));return r}}function rn(e,t){const n=typeof e=="function"?e():e;return Rh(n,void 0)}function Rh(e,t,n){var r;return jh({modelProps:e,baseModel:t,type:"class",valueType:(r=void 0)!=null?r:!1,fromSnapshotProcessor:void 0,toSnapshotProcessor:void 0})}const on=e=>(t,...n)=>{const r=typeof n[1]=="object"?n[1]:void 0;return $h(e,t,r==null?void 0:r.addInitializer)},Ou=new WeakMap,Su=(e,t)=>{lr(t,xa);const n=Ou.get(e);if(n.needsMakeObservable)cr.makeObservable(t);else if(n.needsMakeObservable===void 0)if(En()>=6)try{cr.makeObservable(t),n.needsMakeObservable=!0}catch(r){const o=r;if(o.message!=="[MobX] No annotations were passed to makeObservable, but no decorator members have been found either"&&o.message!=="[MobX] No annotations were passed to makeObservable, but no decorated members have been found either")throw o;n.needsMakeObservable=!1}else n.needsMakeObservable=!1;t[ts]=!0,lr(t,Xc),n.type==="class"&&t.onInit&&(xo(t,"onInit",wt.OnInit),t.onInit()),n.type==="data"&&t.onLazyInit&&(xo(t,"onLazyInit",wt.OnLazyInit),t.onLazyInit())},Nh={construct(e,t){const n=new e(...t);return Su(e,n),n}},$h=(e,t,n)=>{const r=nn(t)?"class":Ot(t)?"data":void 0;if(!r)throw p("clazz must be a class that extends from Model/DataModel");if(Yn[e]&&jr().showDuplicateModelNameWarnings&&Na("warn",`a model with name "${e}" already exists (if you are using hot-reloading you may safely ignore this warning)`,`duplicateModelName - ${e}`),Qn in t&&t[Qn]===t)throw p("a class already decorated with `@model` cannot be re-decorated");if(t.toString=()=>`class ${t.name}#${e}`,r==="class"&&(t[T]=e),Ou.set(t,{needsMakeObservable:void 0,type:r}),n){n(function(){Su(t,this)});const o={name:e,class:t};Yn[e]=o,Z.set(t,o),lr(t,Oo);return}else{const o=new Proxy(t,Nh);o.prototype.constructor=o,o[Qn]=t;const s={name:e,class:o};return Yn[e]=s,Z.set(o,s),Z.set(t,s),lr(t,Oo),o}};function ft(e){const t=n=>new Vh(n,ge(e));return fe(()=>{const n=R(e),r=(...s)=>`Array<${n.getTypeName(...s,n)}>`,o=new B(V.Array,(s,i,a)=>{if(!X(s))return new te(i,r(o),s,a);if(!n.unchecked)for(let u=0;u<s.length;u++){const l=n.check(s[u],[...i,u],a);if(l)return l}return null},r,t,s=>{if(!X(s))return null;if(!n.unchecked){for(let i=0;i<s.length;i++)if(!n.snapshotType(s[i]))return null}return o},s=>n.unchecked?s:s.map(i=>n.fromSnapshotProcessor(i)),s=>n.unchecked?s:s.map(i=>n.toSnapshotProcessor(i)));return o},t)}class Vh extends H{constructor(t,n){super(t),y(this,"itemType"),this.itemType=n}get itemTypeInfo(){return be(this.itemType)}}var _r;(function(e){e.Single="single",e.Group="group"})(_r||(_r={}));function br(e,t){if(e.type===_r.Single)return[e];{const n=[];for(const r of e.events)t?n.unshift(...br(r,!0)):n.push(...br(r,!1));return n}}let ot=class extends rn({undoEvents:le(ft(St()),()=>[]),redoEvents:le(ft(St()),()=>[])}){constructor(){super(...arguments),y(this,"_groupStack",[])}_clearUndo(){ut(()=>{this.undoEvents.length=0})}_clearRedo(){ut(()=>{this.redoEvents.length=0})}enforceMaxLevels({maxUndoLevels:t,maxRedoLevels:n}){if(t!==void 0)for(;this.undoEvents.length>t;)this.undoEvents.shift();if(n!==void 0)for(;this.redoEvents.length>n;)this.redoEvents.shift()}_undo({maxRedoLevels:t}){ut(()=>{const n=this.undoEvents.pop();this.redoEvents.push(n),this.enforceMaxLevels({maxRedoLevels:t})})}_redo({maxUndoLevels:t}){ut(()=>{const n=this.redoEvents.pop();this.undoEvents.push(n),this.enforceMaxLevels({maxUndoLevels:t})})}_addUndo({event:t,maxUndoLevels:n}){ut(()=>{this.undoEvents.push(t),this.redoEvents.length=0,this.enforceMaxLevels({maxUndoLevels:n})})}_addUndoToParentGroup(t,n){t.events.push(n)}get _currentGroup(){return this._groupStack[this._groupStack.length-1]}_startGroup(t,n,r){var o;let s=!1,i=!1;const a=this._currentGroup,u={type:_r.Group,groupName:t,events:[]},l=a||(o=r==null?void 0:r.attachedState)==null?void 0:o.save(),c={pause:()=>{if(i)throw p("cannot pause a group when it is already ended");if(!s)throw p("cannot pause a group when it is not running");if(this._currentGroup!==u)throw p("group out of order");this._groupStack.pop(),s=!1},resume:()=>{if(i)throw p("cannot resume a group when it is already ended");if(s)throw p("cannot resume a group when it is already running");this._groupStack.push(u),s=!0},end:()=>{var f;s&&c.pause(),i=!0,a?this._addUndoToParentGroup(a,u):this._addUndo({event:{...u,attachedState:{beforeEvent:l,afterEvent:(f=r==null?void 0:r.attachedState)==null?void 0:f.save()}},maxUndoLevels:r==null?void 0:r.maxUndoLevels})}};return n&&c.resume(),c}};k([q],ot.prototype,"_clearUndo",null);k([q],ot.prototype,"_clearRedo",null);k([q],ot.prototype,"_undo",null);k([q],ot.prototype,"_redo",null);k([q],ot.prototype,"_addUndo",null);ot=k([on(`${Mn}/UndoStore`)],ot);class Ve{constructor(t,n,r,o){y(this,"disposer"),y(this,"subtreeRoot"),y(this,"options"),y(this,"store"),y(this,"_isUndoRecordingDisabled",!1),this.disposer=t,this.subtreeRoot=n,this.options=o,En()>=6&&cr.makeObservable(this),this.store=r??new ot({})}get undoQueue(){return this.store.undoEvents}get redoQueue(){return this.store.redoEvents}get undoLevels(){return this.undoQueue.length}get canUndo(){return this.undoLevels>0}clearUndo(){this.store._clearUndo()}get redoLevels(){return this.redoQueue.length}get canRedo(){return this.redoLevels>0}clearRedo(){this.store._clearRedo()}undo(){var t;if(!this.canUndo)throw p("nothing to undo");const n=this.undoQueue[this.undoQueue.length-1];ut(()=>{var r,o,s;br(n,!0).forEach(i=>{zt(this.subtreeRoot,i.inversePatches,!0)}),(r=n.attachedState)!=null&&r.beforeEvent&&((s=(o=this.options)==null?void 0:o.attachedState)==null||s.restore(n.attachedState.beforeEvent))}),this.store._undo({maxRedoLevels:(t=this.options)==null?void 0:t.maxRedoLevels})}redo(){var t;if(!this.canRedo)throw p("nothing to redo");const n=this.redoQueue[this.redoQueue.length-1];ut(()=>{var r,o,s;br(n,!1).forEach(i=>{zt(this.subtreeRoot,i.patches)}),(r=n.attachedState)!=null&&r.afterEvent&&((s=(o=this.options)==null?void 0:o.attachedState)==null||s.restore(n.attachedState.afterEvent))}),this.store._redo({maxUndoLevels:(t=this.options)==null?void 0:t.maxUndoLevels})}dispose(){this.disposer()}get isUndoRecordingDisabled(){return this._isUndoRecordingDisabled}withoutUndo(t){const n=this._isUndoRecordingDisabled;this._isUndoRecordingDisabled=!0;try{return t()}finally{this._isUndoRecordingDisabled=n}}createGroup(t){const n=this.store._startGroup(t,!1,this.options);return{continue(r){n.resume();try{return r()}finally{n.pause()}},end(){n.end()}}}withGroup(t,n){let r,o;typeof t=="string"?(r=t,o=n):o=t;const s=this.store._startGroup(r,!0,this.options);try{return o()}finally{s.end()}}withGroupFlow(t,n){let r,o;typeof t=="string"?(r=t,o=n):o=t;const s=o(),i=this.store._startGroup(r,!1,this.options),a=s.next.bind(s),u=s.throw.bind(s);return new Promise(function(c,f){function d(_){i.resume();let S;try{S=a(_)}catch(C){i.end(),f(C);return}i.pause(),m(S)}function h(_){i.resume();let S;try{S=u(_)}catch(C){i.end(),f(C);return}i.pause(),m(S)}function m(_){_&&typeof _.then=="function"?_.then(m,f):_.done?(i.end(),c(_.value)):Promise.resolve(_.value).then(d,h)}d(void 0)})}}k([N],Ve.prototype,"undoQueue",null);k([N],Ve.prototype,"redoQueue",null);k([N],Ve.prototype,"undoLevels",null);k([N],Ve.prototype,"canUndo",null);k([O],Ve.prototype,"clearUndo",null);k([N],Ve.prototype,"redoLevels",null);k([N],Ve.prototype,"canRedo",null);k([O],Ve.prototype,"clearRedo",null);k([O],Ve.prototype,"undo",null);k([O],Ve.prototype,"redo",null);let oo=!1;function ut(e){const t=oo;oo=!0;try{return e()}finally{oo=t}}function so(e){return e.type==="value"?e.value:e.value.get()}const Lh=()=>Xe("contextValue");class Fh{constructor(t){y(this,"defaultContextValue",E.box(void 0,{deep:!1})),y(this,"overrideContextValue",E.box(void 0,{deep:!1})),y(this,"nodeContextValue",new WeakMap),y(this,"nodeAtom",new WeakMap),y(this,"setDefault",O(n=>{this.defaultContextValue.set({type:"value",value:n})})),y(this,"setDefaultComputed",O(n=>{this.defaultContextValue.set({type:"computed",value:N(n)})})),y(this,"set",O((n,r)=>{$(n,"node"),this.nodeContextValue.set(n,{type:"value",value:r}),this.reportNodeAtomChanged(n)})),y(this,"setComputed",O((n,r)=>{this._setComputed(n,N(r))})),y(this,"unset",O(n=>{$(n,"node"),this.nodeContextValue.delete(n),this.reportNodeAtomChanged(n)})),y(this,"apply",O((n,r)=>{const o=this.overrideContextValue.get();this.overrideContextValue.set({type:"value",value:r});try{const s=n();return ze(s,!0)&&this.set(s,r),s}finally{this.overrideContextValue.set(o)}})),y(this,"applyComputed",O((n,r)=>{const o=N(r),s=this.overrideContextValue.get();this.overrideContextValue.set({type:"computed",value:o});try{const i=n();return ze(i,!0)&&this._setComputed(i,o),i}finally{this.overrideContextValue.set(s)}})),this.setDefault(t)}reportNodeAtomObserved(t){Ce(this.nodeAtom,t,Lh).reportObserved()}reportNodeAtomChanged(t){var n;(n=this.nodeAtom.get(t))==null||n.reportChanged()}fastGet(t,n){n&&this.reportNodeAtomObserved(t);const r=this.nodeContextValue.get(t);if(r)return so(r);const o=gn(t,n);if(!o){const s=this.overrideContextValue.get();return s?so(s):this.getDefault()}return this.fastGet(o,n)}get(t){return $(t,"node"),this.fastGet(t,!0)}fastGetProviderNode(t,n){if(n&&this.reportNodeAtomObserved(t),this.nodeContextValue.get(t))return t;const o=gn(t,n);if(o)return this.fastGetProviderNode(o,n)}getProviderNode(t){return $(t,"node"),this.fastGetProviderNode(t,!0)}getDefault(){return so(this.defaultContextValue.get())}_setComputed(t,n){$(t,"node"),this.nodeContextValue.set(t,{type:"computed",value:n}),this.reportNodeAtomChanged(t)}}function zr(e){return new Fh(e)}zr(!1);class sn extends rn({id:le(qe)}){get maybeCurrent(){return this.resolve()}get isValid(){return!!this.maybeCurrent}get current(){const t=this.maybeCurrent;if(!t)throw p(`a reference of type '${this[T]}' could not resolve an object with id '${this.id}'`);return t}}k([N],sn.prototype,"maybeCurrent",null);k([N],sn.prototype,"isValid",null);k([N],sn.prototype,"current",null);const Oi=new WeakMap;function Au(e,t,n,r){let o=class extends sn{constructor(){super(...arguments),y(this,"resolver"),y(this,"savedOldTarget")}resolve(){return this.resolver||(this.resolver=t(this)),this.resolver(this)}internalForceUpdateBackRefs(u){const l=this.savedOldTarget;this.savedOldTarget=u,Gh(this,i,u,l)}forceUpdateBackRefs(){this.internalForceUpdateBackRefs(this.maybeCurrent)}onInit(){let u,l=!0;Bt(()=>this.maybeCurrent,c=>{this.internalForceUpdateBackRefs(c);const f=u,d=l;u=c,l=!1,!d&&r&&c!==f&&r(this,c,f)},{fireImmediately:!0})}};k([O],o.prototype,"forceUpdateBackRefs",null),o=k([on(e)],o);const s=a=>{let u;if(typeof a=="string"?u=a:(Et(a,"target"),u=n(a)),typeof u!="string")throw p("ref target object must have an id of string type");return new o({id:u})};s.refClass=o;const i=s;return i}function gs(e){if(Y(e)){const t=e.getRefId();if(t!==void 0&&typeof t!="string")throw p("'getRefId()' must return a string or undefined when present");return t}}const Bh=new WeakMap;function Uh(e,t,n=gs){const o=Ce(Bh,n,()=>gf(s=>n(s))).walk(e);return o?o.get(t):void 0}function Hn(e,t){let n=Oi.get(e);if(n||(n={all:E.set(void 0,{deep:!1}),byType:new WeakMap},Oi.set(e,n)),t){let r=n.byType.get(t);return r||(r=E.set(void 0,{deep:!1}),n.byType.set(t,r)),r}else return n.all}const Gh=O("updateBackRefs",(e,t,n,r)=>{n!==r&&(r&&(Hn(r).delete(e),Hn(r,t).delete(e)),n&&(Hn(n).add(e),Hn(n,t).add(e)))});Ba({initData(){return{all:new Set,byType:new WeakMap}},addNode(e,t){e instanceof sn&&(t.all.add(e),Ce(t.byType,e.constructor,()=>new Set).add(e))}});O("customRef",(e,t)=>{var n;const r=(n=t.getId)!=null?n:gs;return Au(e,()=>t.resolve,r,t.onResolvedValueChange)});O("rootRef",(e,t)=>{var n;const r=(n=t==null?void 0:t.getId)!=null?n:gs,o=t==null?void 0:t.onResolvedValueChange;return Au(e,i=>{let a;return()=>{const u=yr(i,!0);if(Wh(i,u,a,r))return a;const l=Uh(u,i.id,r);return l&&(a=l),l}},r,o)});function Wh(e,t,n,r){return!(!n||e.id!==r(n)||t!==yr(n,!0))}function U(e,t){return fh(e,t)}function Kh(e,...t){return e.splice(...t)}const ne=`${Mn}/arrayActions`;U(`${ne}::set`,(e,t,n)=>{W(e,t,n)}),U(`${ne}::delete`,(e,t)=>Ae(e,String(t))),U(`${ne}::setLength`,(e,t)=>{e.length=t}),U(`${ne}::concat`,(e,...t)=>e.concat(...t)),U(`${ne}::copyWithin`,(e,t,n,r)=>e.copyWithin(t,n,r)),U(`${ne}::fill`,(e,t,n,r)=>e.fill(t,n,r)),U(`${ne}::pop`,e=>e.pop()),U(`${ne}::push`,(e,...t)=>e.push(...t)),U(`${ne}::reverse`,e=>e.reverse()),U(`${ne}::shift`,e=>e.shift()),U(`${ne}::slice`,(e,t,n)=>e.slice(t,n)),U(`${ne}::sort`,(e,t)=>e.sort(t)),U(`${ne}::splice`,Kh),U(`${ne}::unshift`,(e,...t)=>e.unshift(...t)),U(`${ne}::swap`,(e,t,n)=>{if(t<0||n<0||t>=e.length||n>=e.length)return!1;n<t&&([t,n]=[n,t]);const[r]=e.splice(t,1),[o]=e.splice(n-1,1);return e.splice(t,0,o),e.splice(n,0,r),!0});const qn=`${Mn}/objectActions`;U(`${qn}::set`,(e,t,n)=>{Ge(e)?W(e,t,n):e[t]=n}),U(`${qn}::assign`,(e,t)=>{Et(t,"partialObject");const n=Object.keys(t);if(Ge(e))for(const r of n){const o=t[r];W(e,r,o)}else for(const r of n)e[r]=t[r]}),U(`${qn}::delete`,(e,t)=>Ae(e,t)),U(`${qn}::call`,(e,t,...n)=>e[t](...n));O(e=>{const t=E.map();t.dataObject=e;const n=Object.keys(e);for(let s=0;s<n.length;s++){const i=n[s];t.set(i,e[i])}let r=!1,o=!1;return kt(e,O(s=>{if(!r){o=!0;try{switch(s.type){case"add":case"update":{t.set(s.name,s.newValue);break}case"remove":{t.delete(s.name);break}}}finally{o=!1}}})),Yt(t,O(s=>{if(r)return null;if(o)return s;r=!0;try{switch(s.type){case"add":case"update":{W(e,s.name,s.newValue);break}case"delete":{Ae(e,s.name);break}}return s}finally{r=!1}})),t});O(e=>{let t;if(En()>=6?t=E.map(e):(t=E.map(),e.forEach(([o,s])=>{t.set(o,s)})),t.dataObject=e,t.size!==e.length)throw p("arrays backing a map cannot contain duplicate keys");let n=!1,r=!1;return kt(e,O(o=>{if(!n){r=!0;try{switch(o.type){case"splice":{{const s=o.removed;for(let i=0;i<s.length;i++)t.delete(s[i][0])}{const s=o.added;for(let i=0;i<s.length;i++)t.set(s[i][0],s[i][1])}break}case"update":{t.delete(o.oldValue[0]),t.set(o.newValue[0],o.newValue[1]);break}}}finally{r=!1}}})),Yt(t,O(o=>{if(n)return null;if(r)return o;n=!0;try{switch(o.type){case"update":{const s=e.findIndex(i=>i[0]===o.name);e[s]=[o.name,o.newValue];break}case"add":{e.push([o.name,o.newValue]);break}case"delete":{const s=e.findIndex(i=>i[0]===o.name);s>=0&&e.splice(s,1);break}}return o}finally{n=!1}})),t});O(e=>{let t;if(En()>=6?t=E.set(e):(t=E.set(),e.forEach(o=>{t.add(o)})),t.dataObject=e,t.size!==e.length)throw p("arrays backing a set cannot contain duplicate values");let n=!1,r=!1;return kt(e,O(o=>{if(!n){r=!0;try{switch(o.type){case"splice":{{const s=o.removed;for(let i=0;i<s.length;i++)t.delete(s[i])}{const s=o.added;for(let i=0;i<s.length;i++)t.add(s[i])}break}case"update":{t.delete(o.oldValue),t.add(o.newValue);break}}}finally{r=!1}}})),Yt(t,O(o=>{if(n)return null;if(r)return o;n=!0;try{switch(o.type){case"add":{e.push(o.newValue);break}case"delete":{const s=e.indexOf(o.oldValue);s>=0&&e.splice(s,1);break}}return o}finally{n=!1}})),t});class an{constructor(t){y(this,"data"),y(this,"originalData"),$(t,"original"),this.originalData=t,this.data=et(this.originalSnapshot,{generateNewIds:!1})}commit(){Mo(this.originalData,J(this.data))}commitByPath(t){const n=eo(this.data,t);if(!n.resolved)throw p(`path ${JSON.stringify(t)} could not be resolved in draft object`);const r=io(this.data,t);if(!to(this.originalData,t,r).resolved)throw p(`path ${JSON.stringify(t)} could not be resolved in original object`);zt(this.originalData,[{path:t,op:"replace",value:J(n.value)}])}reset(){Mo(this.data,this.originalSnapshot)}resetByPath(t){const n=eo(this.originalData,t);if(!n.resolved)throw p(`path ${JSON.stringify(t)} could not be resolved in original object`);const r=io(this.originalData,t);if(!to(this.data,t,r).resolved)throw p(`path ${JSON.stringify(t)} could not be resolved in draft object`);zt(this.data,[{path:t,op:"replace",value:J(n.value)}])}get isDirty(){return!jo(J(this.data),this.originalSnapshot)}isDirtyByPath(t){const n=eo(this.data,t);if(!n.resolved)throw p(`path ${JSON.stringify(t)} could not be resolved in draft object`);const r=io(this.data,t),o=to(this.originalData,t,r);return o.resolved?!jo(n.value,o.value):!0}get originalSnapshot(){return J(this.originalData)}}k([O],an.prototype,"commit",null);k([O],an.prototype,"commitByPath",null);k([O],an.prototype,"reset",null);k([O],an.prototype,"resetByPath",null);k([N],an.prototype,"isDirty",null);k([N],an.prototype,"originalSnapshot",null);function io(e,t){const n=gh(e,t);return n.length>=1&&(n[n.length-1]=vu),n}zr();function Si(...e){const t=n=>new zh(n,e.map(ge));return fe(()=>{const n=e.map(R),r=(...s)=>"["+n.map(a=>s.includes(a)?"...":a.getTypeName(...s,a)).join(", ")+"]",o=new B(V.Array,(s,i,a)=>{if(!X(s)||s.length!==e.length)return new te(i,r(o),s,a);for(let u=0;u<s.length;u++){const l=n[u].check(s[u],[...i,u],a);if(l)return l}return null},r,t,s=>{if(!X(s)||s.length!==e.length)return null;for(let i=0;i<s.length;i++)if(!n[i].snapshotType(s[i]))return null;return o},s=>s.map((i,a)=>n[a].fromSnapshotProcessor(i)),s=>s.map((i,a)=>n[a].toSnapshotProcessor(i)));return o},t)}class zh extends H{constructor(t,n){super(t),y(this,"itemTypes"),y(this,"_itemTypeInfos",he(()=>this.itemTypes.map(be))),this.itemTypes=n}get itemTypeInfos(){return this._itemTypeInfos()}}let At=class extends rn({[ue]:ns,items:le(ft(St()),()=>[])}){constructor(){super(...arguments),y(this,Us,"ArraySet")}add(t){const n=this.items;return n.includes(t)||n.push(t),this}clear(){this.items.length=0}delete(t){const n=this.items,r=n.findIndex(o=>o===t);return r>=0?(n.splice(r,1),!0):!1}forEach(t,n){const r=this.items,o=r.length;for(let s=0;s<o;s++){const i=r[s];t.call(n,i,i,this)}}has(t){return this.items.includes(t)}get size(){return this.items.length}keys(){return this.values()}values(){const t=this.items;return Ko(t)[Symbol.iterator]()}entries(){return this.items.map(n=>[n,n]).values()}[(Gs=Symbol.iterator,Us=Symbol.toStringTag,Gs)](){return this.values()}union(t){return new Set(this).union(t)}intersection(t){return new Set(this).intersection(t)}difference(t){return new Set(this).difference(t)}symmetricDifference(t){return new Set(this).symmetricDifference(t)}isSubsetOf(t){return new Set(this).isSubsetOf(t)}isSupersetOf(t){return new Set(this).isSupersetOf(t)}isDisjointFrom(t){return new Set(this).isDisjointFrom(t)}};k([q],At.prototype,"add",null);k([q],At.prototype,"clear",null);k([q],At.prototype,"delete",null);At=k([on(`${Mn}/ArraySet`)],At);function Hh(e){const t=n=>new qh(n,ge(e));return fe(()=>{const n=Z.get(At),r=R(e),o=(...a)=>`ArraySet<${r.getTypeName(...a,r)}>`,s=Nn(()=>({items:ft(r)})),i=new B(V.Object,(a,u,l)=>a instanceof At?R(s).check(a.$,u,l):new te(u,o(i),a,l),o,t,a=>oe(a)?a[T]!==void 0?a[T]===n.name?i:null:R(s).snapshotType(a)?i:null:null,a=>({...a,[T]:n.name,items:a.items.map(u=>r.fromSnapshotProcessor(u))}),a=>({...a,items:a.items.map(l=>r.toSnapshotProcessor(l))}));return i},t)}class qh extends H{constructor(t,n){super(t),y(this,"valueType"),this.valueType=n}get valueTypeInfo(){return be(this.valueType)}}function gr(e){const t=n=>new Jh(n,ge(e));return fe(()=>{const n=R(e),r=(...i)=>`Record<${n.getTypeName(...i,n)}>`,o=(i,a)=>{if(n.unchecked)return i;const u={},l=Object.keys(i);for(let c=0;c<l.length;c++){const f=l[c],d=a==="from"?n.fromSnapshotProcessor(i[f]):n.toSnapshotProcessor(i[f]);u[f]=d}return u},s=new B(V.Object,(i,a,u)=>{if(!oe(i))return new te(a,r(s),i,u);if(!n.unchecked){const l=Object.keys(i);for(let c=0;c<l.length;c++){const f=l[c],d=i[f],h=n.check(d,[...a,f],u);if(h)return h}}return null},r,t,i=>{if(!oe(i))return null;if(!n.unchecked){const a=Object.keys(i);for(let u=0;u<a.length;u++){const l=a[u],c=i[l];if(!n.snapshotType(c))return null}}return s},i=>o(i,"from"),i=>o(i,"to"));return s},t)}class Jh extends H{constructor(t,n){super(t),y(this,"valueType"),this.valueType=n}get valueTypeInfo(){return be(this.valueType)}}let Tt=class extends rn({[ue]:ns,items:le(gr(St()),()=>({}))}){constructor(){super(...arguments),y(this,Ws,"ObjectMap")}clear(){const t=this.items,n=Object.keys(t),r=n.length;for(let o=0;o<r;o++){const s=n[o];Ae(t,s)}}delete(t){return this.has(t)?(Ae(this.items,t),!0):!1}forEach(t,n){const r=this.items,o=Object.keys(r),s=o.length;for(let i=0;i<s;i++){const a=o[i];t.call(n,r[a],a,this)}}get(t){return ma(this.items,t)}has(t){return zo(this.items,t)}set(t,n){return W(this.items,t,n),this}get size(){return yt(this.items).length}keys(){return yt(this.items)[Symbol.iterator]()}values(){return Ko(this.items)[Symbol.iterator]()}entries(){return va(this.items)[Symbol.iterator]()}[(Ks=Symbol.iterator,Ws=Symbol.toStringTag,Ks)](){return this.entries()}};k([q],Tt.prototype,"clear",null);k([q],Tt.prototype,"delete",null);k([q],Tt.prototype,"set",null);Tt=k([on(`${Mn}/ObjectMap`)],Tt);function Xh(e){const t=n=>new Yh(n,ge(e));return fe(()=>{const n=Z.get(Tt),r=R(e),o=(...u)=>`ObjectMap<${r.getTypeName(...u,r)}>`,s=Nn(()=>({items:gr(r)})),i=R(s),a=new B(V.Object,(u,l,c)=>u instanceof Tt?i.check(u.$,l,c):new te(l,o(a),u,c),o,t,u=>oe(u)?u[T]!==void 0?u[T]===n.name?a:null:i.snapshotType(u)?a:null:null,u=>{const l={};for(const c of Object.keys(u.items))l[c]=r.fromSnapshotProcessor(u.items[c]);return{...u,[T]:n.name,items:l}},u=>{const l={};for(const f of Object.keys(u.items))l[f]=r.toSnapshotProcessor(u.items[f]);return{...u,items:l}});return a},t)}class Yh extends H{constructor(t,n){super(t),y(this,"valueType"),this.valueType=n}get valueTypeInfo(){return be(this.valueType)}}function Qh(e){const t="Ref",n=Z.get(e.refClass),r=R(Nn(()=>({id:qe}))),o=new B(V.Object,(s,i,a)=>s instanceof sn?r.check(s.$,i,a):new te(i,t,s,a),()=>t,s=>new Zh(s),s=>oe(s)?s[T]!==void 0?s[T]===n.name?o:null:r.snapshotType(s)?o:null:null,s=>s[T]?s:{...s,[T]:n.name},s=>s);return o}class Zh extends H{}function ep(e){const t=[];for(const n of Object.keys(e)){const r=e[n];!t.includes(r)&&(typeof r!="string"&&r!==+n||e[r]!==+n)&&t.push(r)}return t}function tp(e){Et(e,"enumObject");const t=ep(e).map(n=>Br(n));return $n(...t)}function ws(e,t,n){const r=o=>new np(o,ge(e),t,n);return fe(()=>{const o=R(e),s=(...a)=>{const u=o.getTypeName(...a,o);return`${n||"refinementOf"}<${u}>`},i=new B(o.baseType,(a,u,l)=>{const c=o.check(a,u,l);if(c)return c;const f=t(a);return f===!0||f==null?null:f===!1?new te(u,s(i),a,l):new te(f.path,f.expectedTypeName,f.actualValue,l)},s,r,a=>o.snapshotType(a),a=>o.fromSnapshotProcessor(a),a=>o.toSnapshotProcessor(a));return i},r)}class np extends H{constructor(t,n,r,o){super(t),y(this,"baseType"),y(this,"checkFunction"),y(this,"typeName"),this.baseType=n,this.checkFunction=r,this.typeName=o}get baseTypeInfo(){return be(this.baseType)}}const Ai=ws(Rn,e=>Number.isInteger(e),"integer"),Ti=ws(qe,e=>e!=="","nonEmpty");function rp(e){return $n(e,Ur)}function op(e){return $n(e,Gr)}function sp(e,t,n){const r=o=>new ip(o,ge(e),t,n);return fe(()=>{const o=R(e),s=(...a)=>{const u=o.getTypeName(...a,o);return`${n||"tagged"}<${u}>`};return new B(o.baseType,(a,u,l)=>o.check(a,u,l),s,r,a=>o.snapshotType(a),a=>o.fromSnapshotProcessor(a),a=>o.toSnapshotProcessor(a))},r)}class ip extends H{constructor(t,n,r,o){super(t),y(this,"baseType"),y(this,"tag"),y(this,"typeName"),this.baseType=n,this.tag=r,this.typeName=o}get baseTypeInfo(){return be(this.baseType)}}const hn={literal:Br,undefined:Ur,null:Gr,boolean:Wr,number:Rn,string:qe,or:$n,maybe:rp,maybeNull:op,array:ft,record:gr,unchecked:St,model:Fr,dataModelData:Lr,object:Nn,ref:Qh,frozen:Oh,enum:tp,tag:sp,refinement:ws,integer:Ai,nonEmptyString:Ti,objectMap:Xh,arraySet:Hh,tuple:Si,mapArray(e){return ft(Si(qe,e))},setArray(e){return ft(e)},mapObject(e){return gr(e)},dateString:Ti,dateTimestamp:Ai};function I(e,t,...n){const r=typeof e=="string"?document.createElement(e,{is:t==null?void 0:t.is}):new e;if(t)for(const[o,s]of Object.entries(t)){let i=function(a){if(s instanceof Array){const[u,l]=s;u.registerDisposer(Bt(l,a,{fireImmediately:!0}))}else s instanceof Function?Bt(s,a,{fireImmediately:!0}):console.error("bad 'obs-...' attribute")};if(!o.includes(":"))typeof e=="string"&&o==="is"||r.setAttribute(o,s);else{const[a,u]=o.split(":");switch(a){case"prop":r[u]=s;break;case"style":r.style[u]=s;break;case"class":r.classList.toggle(u,s);break;case"obs":i(l=>r.setAttribute(u,l));break;case"obs-prop":i(l=>r[u]=l);break;case"obs-style":i(l=>r.style[u]=l);break;case"obs-class":i(l=>r.classList.toggle(u,l));break;case"on":r.addEventListener(u,l=>{l.preventDefault(),l.stopImmediatePropagation(),s(l)});break;case"on_":r.addEventListener(u,s);break;default:throw new Error("unsupported qualifier: "+a)}}}for(const o of n)r.append(o);return r}const ap=DocumentFragment,Tu=Text;var up=Object.defineProperty,lp=Object.getOwnPropertyDescriptor,ke=(e,t,n,r)=>{for(var o=r>1?void 0:r?lp(t,n):t,s=e.length-1,i;s>=0;s--)(i=e[s])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&up(t,n,o),o};const Cu=zr(()=>!0),Pu=zr();let Ct=class extends rn({text:le(hn.string),completed:le(hn.boolean,!1).withSetter()}){get isVisible(){return Cu.get(this)(this)}remove(){var e;(e=Pu.get(this))==null||e(this)}edit(e){const t=e.trim();if(t!==this.text){if(!t.length){this.remove();return}this.text=t}}};ke([N],Ct.prototype,"isVisible",1);ke([q],Ct.prototype,"remove",1);ke([q],Ct.prototype,"edit",1);Ct=ke([on("TodoApp/Todo")],Ct);var tt=(e=>(e.SHOW_ALL="SHOW_ALL",e.SHOW_ACTIVE="SHOW_ACTIVE",e.SHOW_COMPLETED="SHOW_COMPLETED",e))(tt||{});const cp={SHOW_ALL:()=>!0,SHOW_ACTIVE:e=>!e.completed,SHOW_COMPLETED:e=>e.completed};let Je=class extends rn({todos:le(hn.array(hn.model(Ct)),()=>[]),filter:le(hn.enum(tt),"SHOW_ACTIVE").withSetter()}){onInit(){Cu.setComputed(this,()=>cp[this.filter]),Pu.set(this,e=>this.removeTodo(e))}get completedCount(){return this.todos.reduce((e,t)=>e+Number(t.completed),0)}get activeCount(){return this.todos.length-this.completedCount}addTodo(e){e.trim()!==""&&this.todos.push(new Ct({text:e}))}removeTodo(e){const t=this.todos.indexOf(e);t!==-1&&this.todos.splice(t,1)}completeAll(){const e=!this.todos.every(t=>t.completed);this.todos.forEach(t=>t.completed=e)}clearCompleted(){for(const e of[...this.todos])e.completed&&this.removeTodo(e)}};ke([N],Je.prototype,"completedCount",1);ke([N],Je.prototype,"activeCount",1);ke([q],Je.prototype,"addTodo",1);ke([q],Je.prototype,"removeTodo",1);ke([q],Je.prototype,"completeAll",1);ke([q],Je.prototype,"clearCompleted",1);Je=ke([on("TodoApp/TodoStore")],Je);var Vt;class ku extends HTMLElement{constructor(){super(...arguments);As(this,Vt,[])}registerDisposer(n){Vn(this,Vt).push(n)}disconnectedCallback(){this.replaceChildren(),Vn(this,Vt).forEach(n=>n()),Vn(this,Vt).length=0}}Vt=new WeakMap;function fp(e,t,n={}){var i;const r=new DocumentFragment,o=e.map(t);o.push(new Comment("#")),r.append(...o);const s=kt(e,a=>{switch(a.type){case"splice":{const{index:u,removedCount:l,added:c}=a,f=c.map(t);o.splice(u,l,...f).forEach(d=>{d.remove()}),o[u+c.length].before(...f);break}case"update":{const{index:u,newValue:l}=a,c=o[u],f=t(l);o[u]=f,c.parentNode.replaceChild(f,c);break}default:throw new Error("unexpected array-change type: "+a.type)}});return(i=n.registry)==null||i.registerDisposer(s),r}class dp extends HTMLElement{constructor(){super(...arguments);un(this,"create")}connectedCallback(){let n;const r=()=>{this.create(n.value),n.value=""};this.append(I("form",{"on:submit":r},n=I("input",{class:"new-todo",placeholder:"What needs to be done?",autofocus:!0})))}}customElements.define("new-todo-form",dp);class hp extends ku{constructor(){super(...arguments);un(this,"todo")}connectedCallback(){const n=E.box(!1);let r,o;const s=()=>{n.set(!0),o.value=this.todo.text,o.focus()},i=()=>{n.set(!1),this.todo.edit(o.value)};this.registerDisposer(Bt(()=>this.todo.isVisible,a=>{this.replaceChildren(a?I("li",{"obs-class:editing":[this,()=>n.get()]},I("div",{class:"view"},r=I("input",{type:"checkbox",class:"toggle","on:change":()=>this.todo.setCompleted(r.checked),"obs-prop:checked":[this,()=>this.todo.completed]}),I("label",{"on:dblclick":s},I(Tu,{"obs-prop:data":[this,()=>this.todo.text]})),I("button",{class:"destroy","on:click":()=>this.todo.remove()})),I("form",{"style:display":"contents","on:submit":i},o=I("input",{class:"edit","on:blur":i}))):I(ap,null))},{fireImmediately:!0}))}}customElements.define("todo-item",hp);class pp extends ku{constructor(){super(...arguments);un(this,"todos")}connectedCallback(){this.append(I("ul",{class:"todo-list"},fp(this.todos,n=>I("todo-item",{"prop:todo":n}),{registry:this})))}}customElements.define("todo-list",pp);class vp extends HTMLElement{constructor(){super(...arguments);un(this,"store")}connectedCallback(){const n=`toggle-all-${crypto.randomUUID()}`,r=this.store;this.append(I("section",{class:"todoapp"},I("header",{class:"header"},I("h1",null,"todos"),I("new-todo-form",{"prop:create":o=>r.addTodo(o),"on:new-todo":o=>r.addTodo(o.detail)})),I("section",{class:"main"},I("input",{type:"checkbox",id:n,class:"toggle-all","on:change":()=>r.completeAll()}),I("label",{for:n,"obs-class:hidden":()=>r.todos.length===0},"Mark all as complete"),I("todo-list",{"prop:todos":r.todos})),I("footer",{class:"footer","obs-class:hidden":()=>r.todos.length===0},I("span",{class:"todo-count"},I(Tu,{"obs-prop:data":()=>`${r.activeCount}
              item${r.activeCount===1?"":"s"} left!`})),I("ul",{class:"filters"},I("li",null,I("a",{href:"#/","obs-class:selected":()=>r.filter===tt.SHOW_ALL},"All")),I("li",null,I("a",{href:"#/active","obs-class:selected":()=>r.filter===tt.SHOW_ACTIVE},"Active")),I("li",null,I("a",{href:"#/completed","obs-class:selected":()=>r.filter===tt.SHOW_COMPLETED},"Completed"))),I("button",{class:"clear-completed","obs-class:hidden":()=>r.completedCount===0,"on:click":()=>r.clearCompleted()},"Clear completed"))))}}customElements.define("todo-app",vp);document.body.append(I("style",null,".hidden.hidden {display: none;}"));ca({enforceActions:"never",computedRequiresReaction:!1,reactionRequiresObservable:!1,observableRequiresReaction:!1,disableErrorBoundaries:!1});ff({modelAutoTypeChecking:lt.AlwaysOff});const wn=new Je({todos:et(JSON.parse(localStorage.getItem("todos-mk")??"[]"))});qf(wn.todos,e=>{localStorage.setItem("todos-mk",JSON.stringify(e))});{const e=new BroadcastChannel("todos-mk");let t=!1;Mf(wn.todos,n=>{t||e.postMessage(n)}),e.onmessage=n=>{try{t=!0,zt(wn.todos,n.data)}finally{t=!1}}}{let e=function(){const{hash:t}=document.location;wn.setFilter(t==="#/active"?tt.SHOW_ACTIVE:t==="#/completed"?tt.SHOW_COMPLETED:tt.SHOW_ALL)};window.addEventListener("hashchange",e),e()}document.getElementById("root").append(I("todo-app",{"prop:store":wn}));
